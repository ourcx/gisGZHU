import{c as Ke,u as Vn,g as Xe,a as qn,b as T,h as C,d as Et,i as Zi,e as Ot,l as Pl,p as Ll,f as Ci,r as $,j as As,k as Ti,m as ks,n as Fs,o as Rl,w as me,q as Ze,s as Il,t as Pi,v as Ds,x as Os,y as St,z as Ms,A as Al,B as Yi,C as kl,D as Xt,E as Fl,F as Qn,G as Ye,H as zs,I as Dl,Q as xt,J as Mt,K as Ol,L as Bt,M as Nn,N as Vs,O as qs,P as Ml,R as zl,_ as ft,S as an,T as nt,U as xe,V as w,W as k,X as yt,Y as et,Z as V,$ as be,a0 as wt,a1 as Ie,a2 as pt,a3 as Ns,a4 as it,a5 as Vl,a6 as ql,a7 as nn,a8 as Nl,a9 as $e,aa as Jn,ab as Kl,ac as Li,ad as Hl,ae as Bl,af as Gl,ag as jl,ah as Ul,ai as $l,aj as Qi,ak as Ji,al as Ri,am as Xl,an as vi,ao as es,ap as ts,aq as Wl,ar as Ct,as as Ln,at as Ii,au as ns,av as _n,aw as Zl,ax as Yl,ay as Ql,az as is,aA as _i,aB as ss,aC as Jl,aD as ea,aE as ei,aF as Wt,aG as ta,aH as ti}from"./index-CfmI3EZv.js";import{Q as na,a as sn,C as Tt}from"./QChip-Dl5li-6K.js";import{Q as ze,a as je,b as Cn}from"./QList-CRru2dIN.js";import{B as Kn,E as le,T as Ks,l as ge,u as ke,P as Hs,c as Bs,a as qe,b as Ai,V as ia,M as ot,C as on,d as ki,e as ls,t as sa,f as Gs,r as la,g as as,h as yn,i as rn,j as Je,k as aa,m as Rn,W as oa,n as js,F as Hn,s as ra,o as Us,p as $s,D as Fi,q as ua,v as In,w as ca,x as ut,O as An,y as Ve,z as bt,A as kn,G as Xs,H as da,I as ha,J as Fe,K as Ws,L as Zs,N as fa,R as ga,Q as tn,S as ma,U as va,X as _a,Y as os,Z as dt,_ as ya,$ as ln,a0 as pa,a1 as pn,a2 as rs,a3 as us,a4 as ba,a5 as yi,a6 as Ea,a7 as Sa,a8 as xa,a9 as Di,aa as wa,ab as Ca,ac as Fn,ad as Ta,ae as en,af as Oi,ag as Bn,ah as Pa,ai as Mi,aj as La,ak as Ra,al as Ys,am as Dn,an as zi,ao as Ia,ap as Aa,aq as ka,ar as Fa,as as Da,at as pi,au as cs,av as Qs,aw as Tn,ax as ni,ay as Oa,az as Ma,aA as ht,aB as za,aC as bi,aD as Va,aE as qa,aF as Js,aG as el,aH as Na,aI as Ka,aJ as bn,aK as En,aL as Vi,aM as tl,aN as Ha,aO as Ba,aP as Ga,aQ as ja,aR as ii,aS as Pn,aT as nl,aU as Gt,aV as Ua,aW as $a,aX as Xa,aY as ds,aZ as Wa,a_ as hs,a$ as Za,b0 as Ya,b1 as Qa,b2 as fs,b3 as Ja,b4 as eo,b5 as to,b6 as no,b7 as io,b8 as so,b9 as lo,ba as ao,bb as oo,bc as ro,bd as uo}from"./list-qB3HdsMT.js";import{Q as co,a as ho,b as fo}from"./QAvatar-BlF93fHr.js";import{Q as go,a as mo}from"./QPageContainer-DkAdf1G5.js";import{Q as qi}from"./QImg-DnMM-8FZ.js";import{n as gs,b as vo,Q as il,c as ms}from"./QScrollArea-BMHyLgVt.js";import{Q as _o}from"./QIntersection-Dt3N_h_2.js";import"./QScrollObserver-BHCRt7xm.js";const sl=Ke({name:"QBar",props:{...Vn,dense:Boolean},setup(n,{slots:e}){const{proxy:{$q:t}}=Xe(),i=qn(n,t),s=T(()=>`q-bar row no-wrap items-center q-bar--${n.dense===!0?"dense":"standard"}  q-bar--${i.value===!0?"dark":"light"}`);return()=>C("div",{class:s.value,role:"toolbar"},Et(e.default))}}),yo=Ke({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(n,{slots:e}){const{proxy:{$q:t}}=Xe(),i=Zi(Pl,Ot);if(i===Ot)return console.error("QPage needs to be a deep child of QLayout"),Ot;if(Zi(Ll,Ot)===Ot)return console.error("QPage needs to be child of QPageContainer"),Ot;const l=T(()=>{const o=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof n.styleFn=="function"){const r=i.isContainer.value===!0?i.containerHeight.value:t.screen.height;return n.styleFn(o,r)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-o+"px":t.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":t.screen.height-o+"px"}}),a=T(()=>`q-page${n.padding===!0?" q-layout-padding":""}`);return()=>C("main",{class:a.value,style:l.value},Et(e.default))}});class Nt extends Kn{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class rt extends Nt{constructor(e,t,i,s,l,a){super(e,t,l),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ve={SINGLECLICK:"singleclick",CLICK:le.CLICK,DBLCLICK:le.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ei={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class po extends Ks{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ge(i,Ei.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ge(i,Ei.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(le.TOUCHMOVE,this.boundHandleTouchMove_,Hs?{passive:!1}:!1)}emulateClick_(e){let t=new rt(ve.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new rt(ve.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new rt(ve.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==ve.POINTERUP||t.type==ve.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==ve.POINTERDOWN||t.type==ve.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new rt(ve.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new rt(ve.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ge(i,ve.POINTERMOVE,this.handlePointerMove_,this),ge(i,ve.POINTERUP,this.handlePointerUp_,this),ge(this.element_,ve.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ge(this.element_.getRootNode(),ve.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new rt(ve.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new rt(ve.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ke(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(le.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ke(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Re={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},On=1/0;class bo{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Bs(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){qe(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=On?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,l=t[e],a=i[e],o=e;for(;e<s>>1;){const r=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<s&&i[c]<i[r]?c:r;t[e]=t[u],i[e]=i[u],e=u}t[e]=l,i[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,l=i[t],a=s[t];for(;t>e;){const o=this.getParentIndex_(t);if(s[o]>a)i[t]=i[o],s[t]=s[o],t=o;else break}i[t]=l,s[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let s=0;const l=t.length;let a,o,r;for(o=0;o<l;++o)a=t[o],r=e(a),r==On?delete this.queuedElements_[this.keyFunction_(a)]:(i[s]=r,t[s++]=a);t.length=s,i.length=s,this.heapify_()}}class Eo extends bo{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(le.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===q.LOADED||i===q.ERROR||i===q.EMPTY){i!==q.ERROR&&t.removeEventListener(le.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const s=this.dequeue()[0],l=s.getKey();s.getState()===q.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++i,s.load())}}}function So(n,e,t,i,s){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return On;const l=n.viewState.center,a=i[0]-l[0],o=i[1]-l[1];return 65536*Math.log(s)+Math.sqrt(a*a+o*o)/s}class Gn extends Ai{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,s=this.listenerKeys.length;i<s;++i)ke(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==ia&&this.listenerKeys.push(ge(e,ot.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class xo extends Gn{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=a):this.collapseLabel_=l;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=s):this.label_=o;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(r),this.toggleButton_.addEventListener(le.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+on+" "+ki+(this.collapsed_&&this.collapsible_?" "+ls:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>i.add(s)):i.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(l=>{var a;return((a=l.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>sa(()=>s))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Gs(t,this.renderedAttributions_)){la(this.ulElement_);for(let s=0,l=t.length;s<l;++s){const a=document.createElement("li");a.innerHTML=t[s],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ls),this.collapsed_?as(this.collapseLabel_,this.label_):as(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class wo extends Gn{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const l=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=l,a.appendChild(this.label_),a.addEventListener(le.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+on+" "+ki,r=this.element;r.className=o,r.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(yn)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:rn}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const l=this.element.classList.contains(yn);!l&&i===0?this.element.classList.add(yn):l&&i!==0&&this.element.classList.remove(yn)}this.label_.style.transform=s}this.rotation_=i}}class Co extends Gn{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",r=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=r,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(le.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=l,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(le.CLICK,this.handleClick_.bind(this,-i),!1);const y=t+" "+on+" "+ki,m=this.element;m.className=y,m.appendChild(u),m.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const l=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:l,duration:this.duration_,easing:rn})):i.setZoom(l)}}}function To(n){n=n||{};const e=new Je;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Co(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new wo(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new xo(n.attributionOptions)),e}class Po{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[t+2]-this.points_[i+2];if(s<1e3/60)return!1;const l=this.points_[t]-this.points_[i],a=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(a,l),this.initialVelocity_=Math.sqrt(l*l+a*a)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const vs={ACTIVE:"active"};class un extends Ai{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(vs.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(vs.ACTIVE,e)}setMap(e){this.map_=e}}function Lo(n,e,t){const i=n.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:aa,center:n.getConstrainedCenter(s)})}}function Ni(n,e,t,i){const s=n.getZoom();if(s===void 0)return;const l=n.getConstrainedZoom(s+e),a=n.getResolutionForZoom(l);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:i!==void 0?i:250,easing:rn})}class Ro extends un{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==ve.DBLCLICK){const i=e.originalEvent,s=e.map,l=e.coordinate,a=i.shiftKey?-this.delta_:this.delta_,o=s.getView();Ni(o,a,l,this.duration_),i.preventDefault(),t=!0}return!t}}function Si(n){const e=arguments;return function(t){let i=!0;for(let s=0,l=e.length;s<l&&(i=i&&e[s](t),!!i);++s);return i}}const Io=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ao=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},ll=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Ao(n):!0},ko=Rn,al=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(oa&&js&&e.ctrlKey)},ol=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Fo=function(n){const e=n.originalEvent;return js?e.metaKey:e.ctrlKey},Do=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},rl=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},si=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},Oo=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class cn extends un{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ve.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ve.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==ve.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==ve.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Ki(n){const e=n.length;let t=0,i=0;for(let s=0;s<e;s++)t+=n[s].clientX,i+=n[s].clientY;return{clientX:t/e,clientY:i/e}}class Mo extends cn{constructor(e){super({stopDown:Hn}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Si(ol,Oo);this.condition_=e.onFocusOnly?Si(ll,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,s=t.getEventPixel(Ki(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const l=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],o=e.map.getView();ra(l,o.getResolution()),Us(l,o.getRotation()),o.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),a=i.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),r=t.getCoordinateFromPixelInternal([o[0]-s*Math.cos(l),o[1]-s*Math.sin(l)]);i.animateInternal({center:i.getConstrainedCenter(r),duration:500,easing:rn})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class zo extends cn{constructor(e){e=e||{},super({stopDown:Hn}),this.condition_=e.condition?e.condition:Io,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!si(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===$s)return;const s=t.getSize(),l=e.pixel,a=Math.atan2(s[1]/2-l[1],l[0]-s[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return si(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return si(e)&&al(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Vo extends Fi{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+i,s.top=Math.min(e[1],t[1])+i,s.width=Math.abs(t[0]-e[0])+i,s.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new ua([s])}getGeometry(){return this.geometry_}}const zt={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Zt extends Kn{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class qo extends cn{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Vo(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??al,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const s=i[0]-t[0],l=i[1]-t[1];return s*s+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Zt(zt.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Zt(t?zt.BOXEND:zt.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Zt(zt.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Zt(zt.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Zt(zt.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class No extends qo{constructor(e){e=e||{};const t=e.condition?e.condition:Do;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const l=i.rotatedExtentForGeometry(s),a=i.getResolutionForExtentInternal(l),o=i.getResolution()/a;s=s.clone(),s.scale(o*o)}i.fitInternal(s,{duration:this.duration_,easing:rn})}}const _t={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Ko extends un{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return ol(t)&&rl(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==le.KEYDOWN){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==_t.DOWN||s==_t.LEFT||s==_t.RIGHT||s==_t.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let r=0,c=0;s==_t.DOWN?c=-o:s==_t.LEFT?r=-o:s==_t.RIGHT?r=o:c=o;const u=[r,c];Us(u,a.getRotation()),Lo(a,u,this.duration_),i.preventDefault(),t=!0}}return!t}}class Ho extends un{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Fo(t)&&rl(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==le.KEYDOWN||e.type==le.KEYPRESS){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==="+"||s==="-")){const l=e.map,a=s==="+"?this.delta_:-this.delta_,o=l.getView();Ni(o,a,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}class Bo extends un{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:ko;this.condition_=e.onFocusOnly?Si(ll,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==le.WHEEL)return!0;const i=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==le.WHEEL&&(l=s.deltaY,s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=l;const r=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),r),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-In(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Ni(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Go extends cn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Hn),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],s=this.targetPointers[1],l=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const r=l-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=r}this.lastAngle_=l;const a=e.map,o=a.getView();o.getConstraints().rotation!==$s&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Ki(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class jo extends cn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Hn),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],s=this.targetPointers[1],l=i.clientX-s.clientX,a=i.clientY-s.clientY,o=Math.sqrt(l*l+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const r=e.map,c=r.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(Ki(this.targetPointers))),r.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Uo(n){n=n||{};const e=new Je,t=new Po(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new zo),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new Ro({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new Mo({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new Go),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new jo({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new Ko),e.push(new Ho({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new Bo({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new No({duration:n.zoomDuration})),e}class ct extends Kn{constructor(e,t){super(e),this.layer=t}}const li={LAYERS:"layers"};class jt extends ca{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(li.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Je(i.slice(),{unique:!0}):qe(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Je(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ke),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ge(e,ut.ADD,this.handleLayersAdd_,this),ge(e,ut.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ke);Bs(this.listenerKeys_);const t=e.getArray();for(let i=0,s=t.length;i<s;i++){const l=t[i];this.registerLayerListeners_(l),this.dispatchEvent(new ct("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[ge(e,An.PROPERTYCHANGE,this.handleLayerChange_,this),ge(e,le.CHANGE,this.handleLayerChange_,this)];e instanceof jt&&t.push(ge(e,"addlayer",this.handleLayerGroupAdd_,this),ge(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ve(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new ct("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new ct("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new ct("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ve(t);this.listenerKeys_[i].forEach(ke),delete this.listenerKeys_[i],this.dispatchEvent(new ct("removelayer",t)),this.changed()}getLayers(){return this.get(li.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let s=0,l=i.length;s<l;++s)this.dispatchEvent(new ct("removelayer",i[s]))}this.set(li.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const s=this.getLayerState();let l=s.zIndex;!e&&s.zIndex===void 0&&(l=0);for(let a=i,o=t.length;a<o;a++){const r=t[a];r.opacity*=s.opacity,r.visible=r.visible&&s.visible,r.maxResolution=Math.min(r.maxResolution,s.maxResolution),r.minResolution=Math.max(r.minResolution,s.minResolution),r.minZoom=Math.max(r.minZoom,s.minZoom),r.maxZoom=Math.min(r.maxZoom,s.maxZoom),s.extent!==void 0&&(r.extent!==void 0?r.extent=bt(r.extent,s.extent):r.extent=s.extent),r.zIndex===void 0&&(r.zIndex=l)}return t}getSourceState(){return"ready"}}class $o extends Fi{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){kn()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Xs(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),da(s,i)}forEachFeatureAtCoordinate(e,t,i,s,l,a,o,r){let c;const u=t.viewState;function h(f,b,F,O){return l.call(a,b,f?F:null,O)}const y=u.projection,m=ha(e.slice(),y),g=[[0,0]];if(y.canWrapX()&&s){const f=y.getExtent(),b=Fe(f);g.push([-b,0],[b,0])}const x=t.layerStatesArray,E=x.length,L=[],S=[];for(let f=0;f<g.length;f++)for(let b=E-1;b>=0;--b){const F=x[b],O=F.layer;if(O.hasRenderer()&&Ws(F,u)&&o.call(r,O)){const P=O.getRenderer(),K=O.getSource();if(P&&K){const j=K.getWrapX()?m:e,J=h.bind(null,F.managed);S[0]=j[0]+g[f][0],S[1]=j[1]+g[f][1],c=P.forEachFeatureAtCoordinate(S,t,i,J,L)}if(c)return c}}if(L.length===0)return;const v=1/L.length;return L.forEach((f,b)=>f.distanceSq+=b*v),L.sort((f,b)=>f.distanceSq-b.distanceSq),L.some(f=>c=f.callback(f.feature,f.layer,f.geometry)),c}hasFeatureAtCoordinate(e,t,i,s,l,a){return this.forEachFeatureAtCoordinate(e,t,i,s,Rn,this,l,a)!==void 0}getMap(){return this.map_}renderFrame(e){kn()}scheduleExpireIconCache(e){Zs.canExpireCache()&&e.postRenderFunctions.push(Xo)}}function Xo(n,e){Zs.expire()}class Wo extends $o{constructor(e){super(e),this.fontChangeListenerKey_=ge(fa,An.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=on+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const s=new ga(e,void 0,t);i.dispatchEvent(s)}}disposeInternal(){ke(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(tn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,r)=>o.zIndex-r.zIndex);t.some(o=>o.layer instanceof ma&&o.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const l=[];let a=null;for(let o=0,r=t.length;o<r;++o){const c=t[o];e.layerIndex=o;const u=c.layer,h=u.getSourceState();if(!Ws(c,s)||h!="ready"&&h!="undefined"){u.unrender();continue}const y=u.render(e,a);y&&(y!==a&&(this.children_.push(y),a=y),l.push(c))}this.declutter(e,l),va(this.element_,this.children_),this.dispatchRenderEvent(tn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const s=t[i],l=s.layer;l.getDeclutter()&&l.renderDeclutter(e,s)}t.forEach(i=>i.layer.renderDeferred(e))}}}function ul(n){if(n instanceof Di){n.setMapInternal(null);return}n instanceof jt&&n.getLayers().forEach(ul)}function cl(n,e){if(n instanceof Di){n.setMapInternal(e);return}if(n instanceof jt){const t=n.getLayers().getArray();for(let i=0,s=t.length;i<s;++i)cl(t[i],e)}}class Zo extends Ai{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Yo(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:_a,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=os(),this.pixelToCoordinateTransform_=os(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||To(),this.interactions=t.interactions||Uo({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Eo(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Re.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Re.VIEW,this.handleViewChanged_),this.addChangeListener(Re.SIZE,this.handleSizeChanged_),this.addChangeListener(Re.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof dt)&&e.view.then(function(s){i.setView(new dt(s))}),this.controls.addEventListener(ut.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(ut.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(ut.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(ut.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(ut.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(ut.REMOVE,s=>{const l=s.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){cl(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const l=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:Rn,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,l,o,t,null,a,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(s){s instanceof jt?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Rn,l=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,l,a,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),l=i.width/s[0],a=i.height/s[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-i.left)/l,(o.clientY-i.top)/a]}getTarget(){return this.get(Re.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return ya(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ln(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Re.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Je){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t];if(!s.visible)continue;const l=s.layer.getRenderer();if(l&&!l.ready)return!0;const a=s.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=pa(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ln(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Re.SIZE)}getView(){return this.get(Re.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,s){return So(this.frameState_,e,t,i,s)}handleBrowserEvent(e,t){t=t||e.type;const i=new rt(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Ei.POINTERDOWN||i===le.WHEEL||i===le.KEYDOWN){const s=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():s,a=t.target,o=l instanceof ShadowRoot?l.host===a?l.host.ownerDocument:l:l===s?s.documentElement:l;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let l=s.length-1;l>=0;l--){const a=s[l];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,l=s;if(e){const a=e.viewHints;if(a[pn.ANIMATING]||a[pn.INTERACTING]){const o=Date.now()-e.time>8;s=o?0:8,l=o?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(tn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(tn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Nt(ot.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Nt(ot.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let s=0,l=i.length;s<l;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)ke(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(le.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(le.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Wo(this)),this.mapBrowserEventHandler_=new po(this,this.moveTolerance_);for(const l in ve)this.mapBrowserEventHandler_.addEventListener(ve[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(le.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(le.WHEEL,this.boundHandleBrowserEvent_,Hs?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const l=t.getRootNode();i=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[ge(i,le.KEYDOWN,this.handleBrowserEvent,this),ge(i,le.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ke(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ke(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ge(e,An.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ge(e,le.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ke),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new ct("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ge(e,An.PROPERTYCHANGE,this.render,this),ge(e,le.CHANGE,this.render,this),ge(e,"addlayer",this.handleLayerAdd_,this),ge(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){ul(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),s=this.frameState_;let l=null;if(t!==void 0&&rs(t)&&i&&i.isDef()){const a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:us(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Ve(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const r=isNaN(o.nextRotation)?o.rotation:o.nextRotation;l.nextExtent=us(o.nextCenter,o.nextResolution,r,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!ba(this.previousExtent_)&&!yi(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Nt(ot.MOVESTART,this,s)),this.previousExtent_=Ea(this.previousExtent_)),this.previousExtent_&&!l.viewHints[pn.ANIMATING]&&!l.viewHints[pn.INTERACTING]&&!yi(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Nt(ot.MOVEEND,this,l)),Sa(l.extent,this.previousExtent_))),this.dispatchEvent(new Nt(ot.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(ot.LOADSTART)||this.hasListener(ot.LOADEND)||this.hasListener(tn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new ct("removelayer",t)),this.set(Re.LAYERGROUP,e)}setSize(e){this.set(Re.SIZE,e)}setTarget(e){this.set(Re.TARGET,e)}setView(e){if(!e||e instanceof dt){this.set(Re.VIEW,e);return}this.set(Re.VIEW,new dt);const t=this;e.then(function(i){t.setView(new dt(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),l=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),a=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(l)&&!isNaN(a)&&(t=[Math.max(0,l),Math.max(0,a)],!rs(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&xa("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Gs(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}}function Yo(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new jt({layers:n.layers});t[Re.LAYERGROUP]=i,t[Re.TARGET]=n.target,t[Re.VIEW]=n.view instanceof dt?n.view:new dt;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new Je(n.controls.slice()):(qe(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls));let l;n.interactions!==void 0&&(Array.isArray(n.interactions)?l=new Je(n.interactions.slice()):(qe(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new Je(n.overlays.slice()):(qe(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new Je,{controls:s,interactions:l,keyboardEventTarget:e,overlays:a,values:t}}class Hi extends Ks{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(le.CHANGE)}release(){this.setState(q.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==q.EMPTY){if(this.state!==q.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){kn()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=t-i+1e3/60;return s>=this.transition_?1:wa(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function xi(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Qo=new Error("disposed"),Jo=[256,256];class _s extends Hi{constructor(e){const t=q.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=xi(this.data_);return e?[e.width,e.height]:Jo}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==q.IDLE&&this.state!==q.ERROR)return;this.state=q.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=q.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=q.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Qo),this.controller_=null),super.disposeInternal()}}class dl extends Hi{constructor(e,t,i,s,l,a){super(e,t,a),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=q.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=q.ERROR,this.unlistenImage_(),this.image_=er(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=q.LOADED:this.state=q.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==q.ERROR&&(this.state=q.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==q.IDLE&&(this.state=q.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ca(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function er(){const n=Fn(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class Bi{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Vt(n,e,t,i,s){return s!==void 0?(s.minX=n,s.maxX=e,s.minY=t,s.maxY=i,s):new Bi(n,e,t,i)}let ai;const Kt=[];function ys(n,e,t,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,s)),n.restore()}function oi(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function tr(){if(ai===void 0){const n=Fn(6,6,Kt);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",ys(n,4,5,4,0),ys(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;ai=oi(e,0)||oi(e,4)||oi(e,8),Mi(n),Kt.push(n.canvas)}return ai}function ps(n,e,t,i){const s=Ys(t,e,n);let l=Dn(e,i,t);const a=e.getMetersPerUnit();a!==void 0&&(l*=a);const o=n.getMetersPerUnit();o!==void 0&&(l/=o);const r=n.getExtent();if(!r||zi(r,s)){const c=Dn(n,l,s)/l;isFinite(c)&&c>0&&(l/=c)}return l}function nr(n,e,t,i){const s=La(t);let l=ps(n,e,s,i);return(!isFinite(l)||l<=0)&&Ra(t,function(a){return l=ps(n,e,a,i),isFinite(l)&&l>0}),l}function ir(n,e,t,i,s,l,a,o,r,c,u,h,y,m){const g=Fn(Math.round(t*n),Math.round(t*e),Kt);if(h||(g.imageSmoothingEnabled=!1),r.length===0)return g.canvas;g.scale(t,t);function x(b){return Math.round(b*t)/t}g.globalCompositeOperation="lighter";const E=Oi();r.forEach(function(b,F,O){Ta(E,b.extent)});let L;const S=t/i,v=(h?1:1+Math.pow(2,-24))/S;L=Fn(Math.round(Fe(E)*S),Math.round(en(E)*S),Kt),h||(L.imageSmoothingEnabled=!1),r.forEach(function(b,F,O){if(b.image.width>0&&b.image.height>0){if(b.clipExtent){L.save();const X=(b.clipExtent[0]-E[0])*S,U=-(b.clipExtent[3]-E[3])*S,ue=Fe(b.clipExtent)*S,ne=en(b.clipExtent)*S;L.rect(h?X:Math.round(X),h?U:Math.round(U),h?ue:Math.round(X+ue)-Math.round(X),h?ne:Math.round(U+ne)-Math.round(U)),L.clip()}const P=(b.extent[0]-E[0])*S,K=-(b.extent[3]-E[3])*S,j=Fe(b.extent)*S,J=en(b.extent)*S;L.drawImage(b.image,c,c,b.image.width-2*c,b.image.height-2*c,h?P:Math.round(P),h?K:Math.round(K),h?j:Math.round(P+j)-Math.round(P),h?J:Math.round(K+J)-Math.round(K)),b.clipExtent&&L.restore()}});const f=Bn(a);return o.getTriangles().forEach(function(b,F,O){const P=b.source,K=b.target;let j=P[0][0],J=P[0][1],X=P[1][0],U=P[1][1],ue=P[2][0],ne=P[2][1];const ie=x((K[0][0]-f[0])/l),Ce=x(-(K[0][1]-f[1])/l),se=x((K[1][0]-f[0])/l),ee=x(-(K[1][1]-f[1])/l),he=x((K[2][0]-f[0])/l),p=x(-(K[2][1]-f[1])/l),R=j,M=J;j=0,J=0,X-=R,U-=M,ue-=R,ne-=M;const Z=[[X,U,0,0,se-ie],[ue,ne,0,0,he-ie],[0,0,X,U,ee-Ce],[0,0,ue,ne,p-Ce]],Y=Pa(Z);if(!Y)return;if(g.save(),g.beginPath(),tr()||!h){g.moveTo(se,ee);const z=4,te=ie-se,B=Ce-ee;for(let ae=0;ae<z;ae++)g.lineTo(se+x((ae+1)*te/z),ee+x(ae*B/(z-1))),ae!=z-1&&g.lineTo(se+x((ae+1)*te/z),ee+x((ae+1)*B/(z-1)));g.lineTo(he,p)}else g.moveTo(se,ee),g.lineTo(ie,Ce),g.lineTo(he,p);g.clip(),g.transform(Y[0],Y[2],Y[1],Y[3],ie,Ce),g.translate(E[0]-R,E[3]-M);let G;if(L)G=L.canvas,g.scale(v,-v);else{const z=r[0],te=z.extent;G=z.image,g.scale(Fe(te)/G.width,-en(te)/G.height)}g.drawImage(G,0,0),g.restore()}),L&&(Mi(L),Kt.push(L.canvas)),u&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,o.getTriangles().forEach(function(b,F,O){const P=b.target,K=(P[0][0]-f[0])/l,j=-(P[0][1]-f[1])/l,J=(P[1][0]-f[0])/l,X=-(P[1][1]-f[1])/l,U=(P[2][0]-f[0])/l,ue=-(P[2][1]-f[1])/l;g.beginPath(),g.moveTo(J,X),g.lineTo(K,j),g.lineTo(U,ue),g.closePath(),g.stroke()}),g.restore()),g.canvas}const sr=10,bs=.25;class lr{constructor(e,t,i,s,l,a,o){this.sourceProj_=e,this.targetProj_=t;let r={};const c=o?Ia(v=>ln(o,Ys(v,this.targetProj_,this.sourceProj_))):Aa(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const f=v[0]+"/"+v[1];return r[f]||(r[f]=c(v)),r[f]},this.maxSourceExtent_=s,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Fe(s)>=Fe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Fe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Fe(this.targetProj_.getExtent()):null;const u=Bn(i),h=ka(i),y=Fa(i),m=Da(i),g=this.transformInv_(u),x=this.transformInv_(h),E=this.transformInv_(y),L=this.transformInv_(m),S=sr+(a?Math.max(0,Math.ceil(Math.log2(pi(i)/(a*a*256*256)))):0);if(this.addQuad_(u,h,y,m,g,x,E,L,S),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(f,b,F){v=Math.min(v,f.source[0][0],f.source[1][0],f.source[2][0])}),this.triangles_.forEach(f=>{if(Math.max(f.source[0][0],f.source[1][0],f.source[2][0])-v>this.sourceWorldWidth_/2){const b=[[f.source[0][0],f.source[0][1]],[f.source[1][0],f.source[1][1]],[f.source[2][0],f.source[2][1]]];b[0][0]-v>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-v>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-v>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);const F=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-F<this.sourceWorldWidth_/2&&(f.source=b)}})}r={}}addTriangle_(e,t,i,s,l,a){this.triangles_.push({source:[s,l,a],target:[e,t,i]})}addQuad_(e,t,i,s,l,a,o,r,c){const u=cs([l,a,o,r]),h=this.sourceWorldWidth_?Fe(u)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,m=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=cs([e,t,i,s]);g=Fe(E)/this.targetWorldWidth_>bs||g}!m&&this.sourceProj_.isGlobal()&&h&&(g=h>bs||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Qs(u,this.maxSourceExtent_))return;let x=0;if(!g&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(r[0])||!isFinite(r[1]))){if(c>0)g=!0;else if(x=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(r[0])||!isFinite(r[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(c>0){if(!g){const E=[(e[0]+i[0])/2,(e[1]+i[1])/2],L=this.transformInv_(E);let S;m?S=(Tn(l[0],y)+Tn(o[0],y))/2-Tn(L[0],y):S=(l[0]+o[0])/2-L[0];const v=(l[1]+o[1])/2-L[1];g=S*S+v*v>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const E=[(t[0]+i[0])/2,(t[1]+i[1])/2],L=this.transformInv_(E),S=[(s[0]+e[0])/2,(s[1]+e[1])/2],v=this.transformInv_(S);this.addQuad_(e,t,E,S,l,a,L,v,c-1),this.addQuad_(S,E,i,s,v,L,o,r,c-1)}else{const E=[(e[0]+t[0])/2,(e[1]+t[1])/2],L=this.transformInv_(E),S=[(i[0]+s[0])/2,(i[1]+s[1])/2],v=this.transformInv_(S);this.addQuad_(e,E,S,s,l,L,v,r,c-1),this.addQuad_(E,t,i,S,L,a,o,v,c-1)}return}}if(m){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,i,s,l,o,r),(x&14)==0&&this.addTriangle_(e,i,t,l,o,a),x&&((x&13)==0&&this.addTriangle_(t,s,e,a,r,l),(x&7)==0&&this.addTriangle_(t,s,i,a,r,o))}calculateSourceExtent(){const e=Oi();return this.triangles_.forEach(function(t,i,s){const l=t.source;ni(e,l[0]),ni(e,l[1]),ni(e,l[2])}),e}getTriangles(){return this.triangles_}}const ar=.5;class hl extends Hi{constructor(e,t,i,s,l,a,o,r,c,u,h,y){super(l,q.IDLE,y),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=o,this.gutter_=r,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=a||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const m=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const E=g?bt(m,g):m;if(pi(E)===0){this.state=q.EMPTY;return}const L=e.getExtent();L&&(x?x=bt(x,L):x=L);const S=s.getResolution(this.wrappedTileCoord_[0]),v=nr(e,i,E,S);if(!isFinite(v)||v<=0){this.state=q.EMPTY;return}const f=u!==void 0?u:ar;if(this.triangulation_=new lr(e,i,E,x,v*f,S),this.triangulation_.getTriangles().length===0){this.state=q.EMPTY;return}this.sourceZ_=t.getZForResolution(v);let b=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(b[1]=In(b[1],x[1],x[3]),b[3]=In(b[3],x[1],x[3])):b=bt(b,x)),!pi(b))this.state=q.EMPTY;else{let F=0,O=0;e.canWrapX()&&(F=Fe(L),O=Math.floor((b[0]-L[0])/F)),Oa(b.slice(),e,!0).forEach(K=>{const j=t.getTileRangeForExtentAndZ(K,this.sourceZ_);for(let J=j.minX;J<=j.maxX;J++)for(let X=j.minY;X<=j.maxY;X++){const U=c(this.sourceZ_,J,X,o);if(U){const ue=O*F;this.sourceTiles_.push({tile:U,offset:ue})}}++O}),this.sourceTiles_.length===0&&(this.state=q.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var s;const i=t.tile;if(i&&i.getState()==q.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const a=(s=this.clipExtent_)==null?void 0:s.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:l,clipExtent:a,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=q.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s=typeof i=="number"?i:i[0],l=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),r=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ir(s,l,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,r,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=q.LOADED}this.changed()}load(){if(this.state==q.IDLE){this.state=q.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==q.IDLE||i==q.LOADING){e++;const s=ge(t,le.CHANGE,l=>{const a=t.getState();(a==q.LOADED||a==q.ERROR||a==q.EMPTY)&&(ke(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,s){t.getState()==q.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ke),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Mi(this.canvas_.getContext("2d")),Kt.push(this.canvas_),this.canvas_=null),super.release()}}class or{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Fi&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return qe(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return qe(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){qe(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function Mn(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function rr(n,e,t){return n+"/"+e+"/"+t}function ur(n){return cr(n[0],n[1],n[2])}function cr(n,e,t){return(e<<n)+t}function dr(n,e){const t=n[0],i=n[1],s=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(i,s):!0}function ri(n,e,t,i){return`${n},${rr(e,t,i)}`}function ui(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],s=i.has(e);return s||i.add(e),!s}function hr(n,e,t){const i=n[t];return i?i.delete(e):!1}function Es(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=bt(e,bi(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const s=i.getTileGridForProjection(n.viewState.projection).getExtent();s&&(e=bt(e,s))}return e}class fr extends Ma{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Oi(),this.tempTileRange_=new Bi(0,0,0,0),this.tempTileCoord_=Mn(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new or(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,s){const l=this.tileCache_,o=this.getLayer().getSource(),r=ri(o.getKey(),e,t,i);let c;if(l.containsKey(r))c=l.get(r);else{if(c=o.getTile(e,t,i,s.pixelRatio,s.viewState.projection),!c)return null;l.set(r,c)}return c}getTile(e,t,i,s){const l=this.getOrCreateTile(e,t,i,s);return l||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=ln(t.pixelToCoordinateTransform,e.slice()),l=i.getExtent();if(l&&!zi(l,s))return null;const a=t.viewState,o=i.getRenderSource(),r=o.getTileGridForProjection(a.projection),c=o.getTilePixelRatio(t.pixelRatio);for(let u=r.getZForResolution(a.resolution);u>=r.getMinZoom();--u){const h=r.getTileCoordForCoordAndZ(s,u),y=this.getTile(u,h[1],h[2],t);if(!y||y.getState()!==q.LOADED)continue;const m=r.getOrigin(u),g=ht(r.getTileSize(u)),x=r.getResolution(u);let E;if(y instanceof dl||y instanceof hl)E=y.getImage();else if(y instanceof _s){if(E=xi(y.getData()),!E)continue}else continue;const L=Math.floor(c*((s[0]-m[0])/x-h[1]*g[0])),S=Math.floor(c*((m[1]-s[1])/x-h[2]*g[1])),v=Math.round(c*o.getGutterForProjection(a.projection));return this.getImageData(E,L+v,S+v)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,t,i,s,l){const a=e.viewState,o=this.getLayer(),r=o.getRenderSource(),c=r.getTileGridForProjection(a.projection),u=Ve(r);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],y=o.getMapInternal(),m=Math.max(i-l,c.getMinZoom(),c.getZForResolution(Math.min(o.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):c.getResolution(0)),r.zDirection)),g=a.rotation,x=g?za(a.center,a.resolution,g,e.size):void 0;for(let E=i;E>=m;--E){const L=c.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),S=c.getResolution(E);for(let v=L.minX;v<=L.maxX;++v)for(let f=L.minY;f<=L.maxY;++f){if(g&&!c.tileCoordIntersectsViewport([E,v,f],x))continue;const b=this.getTile(E,v,f,e);if(!b||!ui(s,b,E))continue;const O=b.getKey();if(h[O]=!0,b.getState()===q.IDLE&&!e.tileQueue.isKeyQueued(O)){const P=Mn(E,v,f,this.tempTileCoord_);e.tileQueue.enqueue([b,u,c.getTileCoordCenter(P),S])}}}}findStaleTile_(e,t){const i=this.tileCache_,s=e[0],l=e[1],a=e[2],o=this.getStaleKeys();for(let r=0;r<o.length;++r){const c=ri(o[r],s,l,a);if(i.containsKey(c)){const u=i.peek(c);if(u.getState()===q.LOADED)return u.endTransition(Ve(this)),ui(t,u,s),!0}}return!1}findAltTiles_(e,t,i,s){const l=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!l)return!1;let a=!0;const o=this.tileCache_,c=this.getLayer().getRenderSource().getKey();for(let u=l.minX;u<=l.maxX;++u)for(let h=l.minY;h<=l.maxY;++h){const y=ri(c,i,u,h);let m=!1;if(o.containsKey(y)){const g=o.peek(y);g.getState()===q.LOADED&&(ui(s,g,i),m=!0)}m||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,l=s.projection,a=s.resolution,o=s.center,r=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(l),y=h.getZForResolution(a,u.zDirection),m=h.getResolution(y),g=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let x=e.extent;const E=u.getTilePixelRatio(r);this.prepareContainer(e,t);const L=this.context.canvas.width,S=this.context.canvas.height,v=i.extent&&bi(i.extent);v&&(x=bt(x,bi(i.extent)));const f=m*L/2/E,b=m*S/2/E,F=[o[0]-f,o[1]-b,o[0]+f,o[1]+b],O={};this.renderedTiles.length=0;const P=c.getPreload();if(e.nextExtent){const se=h.getZForResolution(s.nextResolution,u.zDirection),ee=Es(e,e.nextExtent);this.enqueueTiles(e,ee,se,O,P)}const K=Es(e,x);if(this.enqueueTiles(e,K,y,O,0),P>0&&setTimeout(()=>{this.enqueueTiles(e,K,y-1,O,P-1)},0),!(y in O))return this.container;const j=Ve(this),J=e.time;for(const se of O[y]){const ee=se.getState();if(ee===q.EMPTY)continue;const he=se.tileCoord;if(ee===q.LOADED&&se.getAlpha(j,J)===1){se.endTransition(j);continue}if(ee!==q.ERROR&&(this.renderComplete=!1),this.findStaleTile_(he,O)){hr(O,se,y),e.animate=!0;continue}if(this.findAltTiles_(h,he,y+1,O))continue;const M=h.getMinZoom();for(let Z=y-1;Z>=M&&!this.findAltTiles_(h,he,Z,O);--Z);}const X=m/a*r/E,U=this.getRenderContext(e);Xs(this.tempTransform,L/2,S/2,X,X,0,-L/2,-S/2),i.extent&&this.clipUnrotated(U,e,v),u.getInterpolate()||(U.imageSmoothingEnabled=!1),this.preRender(U,e);const ue=Object.keys(O).map(Number);ue.sort(Va);let ne;const ie=[],Ce=[];for(let se=ue.length-1;se>=0;--se){const ee=ue[se],he=u.getTilePixelSize(ee,r,l),R=h.getResolution(ee)/m,M=he[0]*R*X,Z=he[1]*R*X,Y=h.getTileCoordForCoordAndZ(Bn(F),ee),G=h.getTileCoordExtent(Y),z=ln(this.tempTransform,[E*(G[0]-F[0])/m,E*(F[3]-G[3])/m]),te=E*u.getGutterForProjection(l);for(const B of O[ee]){if(B.getState()!==q.LOADED)continue;const ae=B.tileCoord,Le=Y[1]-ae[1],st=Math.round(z[0]-(Le-1)*M),we=Y[2]-ae[2],We=Math.round(z[1]-(we-1)*Z),Ee=Math.round(z[0]-Le*M),Se=Math.round(z[1]-we*Z),De=st-Ee,Ne=We-Se,lt=ue.length===1;let He=!1;ne=[Ee,Se,Ee+De,Se,Ee+De,Se+Ne,Ee,Se+Ne];for(let Te=0,Pe=ie.length;Te<Pe;++Te)if(!lt&&ee<Ce[Te]){const _e=ie[Te];Qs([Ee,Se,Ee+De,Se+Ne],[_e[0],_e[3],_e[4],_e[7]])&&(He||(U.save(),He=!0),U.beginPath(),U.moveTo(ne[0],ne[1]),U.lineTo(ne[2],ne[3]),U.lineTo(ne[4],ne[5]),U.lineTo(ne[6],ne[7]),U.moveTo(_e[6],_e[7]),U.lineTo(_e[4],_e[5]),U.lineTo(_e[2],_e[3]),U.lineTo(_e[0],_e[1]),U.clip())}ie.push(ne),Ce.push(ee),this.drawTile(B,e,Ee,Se,De,Ne,te,lt),He&&U.restore(),this.renderedTiles.unshift(B),this.updateUsedTiles(e.usedTiles,u,B)}}if(this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!yi(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=r,this.postRender(this.context,e),i.extent&&U.restore(),U.imageSmoothingEnabled=!0,this.renderComplete){const se=(ee,he)=>{const p=Ve(u),R=he.wantedTiles[p],M=R?Object.keys(R).length:0;this.updateCacheSize(M),this.tileCache_.expireCache()};e.postRenderFunctions.push(se)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,s,l,a,o,r){let c;if(e instanceof _s){if(c=xi(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(t),h=Ve(this),y=t.layerStatesArray[t.layerIndex],m=y.opacity*(r?e.getAlpha(h,t.time):1),g=m!==u.globalAlpha;g&&(u.save(),u.globalAlpha=m),u.drawImage(c,o,o,c.width-2*o,c.height-2*o,i,s,l,a),g&&u.restore(),m!==y.opacity?t.animate=!0:r&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const s=Ve(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}}const Sn={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class gr extends Di{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Sn.PRELOAD)}setPreload(e){this.set(Sn.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Sn.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Sn.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Ss extends gr{constructor(e){super(e)}createRenderer(){return new fr(this,{cacheSize:this.getCacheSize()})}}const qt=[0,0,0],at=5;class fl{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,qe(qa(this.resolutions_,(s,l)=>l-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,l=this.resolutions_.length-1;s<l;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,qe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Bn(i)),qe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,qe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Js,qe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,l)=>{const a=new Bi(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,l);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let l=s.minX,a=s.maxX;l<=a;++l)for(let o=s.minY,r=s.maxY;o<=r;++o)i([t,l,o])}forEachTileCoordParentTileRange(e,t,i,s){let l,a,o,r=null,c=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):r=this.getTileCoordExtent(e,s);c>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),l=Vt(a,a,o,o,i)):l=this.getTileRangeForExtentAndZ(r,c,i),t(c,l))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,a=e[2]*2;return Vt(l,l+1,a,a+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],l=e[1],a=e[2];if(t===s)return Vt(l,a,l,a,i);if(this.zoomFactor_){const r=Math.pow(this.zoomFactor_,t-s),c=Math.floor(l*r),u=Math.floor(a*r);if(t<s)return Vt(c,c,u,u,i);const h=Math.floor(r*(l+1))-1,y=Math.floor(r*(a+1))-1;return Vt(c,h,u,y,i)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,qt);const s=qt[1],l=qt[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,qt);const a=qt[1],o=qt[2];return Vt(s,a,l,o,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=ht(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),l=ht(this.getTileSize(e[0]),this.tmpSize_),a=i[0]+e[1]*l[0]*s,o=i[1]-(e[2]+1)*l[1]*s,r=a+l[0]*s,c=o+l[1]*s;return el(a,o,r,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,l){const a=this.getZForResolution(i),o=i/this.getResolution(a),r=this.getOrigin(a),c=ht(this.getTileSize(a),this.tmpSize_);let u=o*(e-r[0])/i/c[0],h=o*(r[1]-t)/i/c[1];return s?(u=bn(u,at)-1,h=bn(h,at)-1):(u=En(u,at),h=En(h,at)),Mn(a,u,h,l)}getTileCoordForXYAndZ_(e,t,i,s,l){const a=this.getOrigin(i),o=this.getResolution(i),r=ht(this.getTileSize(i),this.tmpSize_);let c=(e-a[0])/o/r[0],u=(a[1]-t)/o/r[1];return s?(c=bn(c,at)-1,u=bn(u,at)-1):(c=En(c,at),u=En(u,at)),Mn(i,c,u,l)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Na(this.resolutions_,e,t||0);return In(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Ka(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}function gl(n){let e=n.getDefaultTileGrid();return e||(e=yr(n),n.setDefaultTileGrid(e)),e}function mr(n,e,t){const i=e[0],s=n.getTileCoordCenter(e),l=Gi(t);if(!zi(l,s)){const a=Fe(l),o=Math.ceil((l[0]-s[0])/a);return s[0]+=a*o,n.getTileCoordForCoordAndZ(s,i)}return e}function vr(n,e,t,i){i=i!==void 0?i:"top-left";const s=ml(n,e,t);return new fl({extent:n,origin:Ha(n,i),resolutions:s,tileSize:t})}function _r(n){const e=n||{},t=e.extent||Vi("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ml(t,e.maxZoom,e.tileSize,e.maxResolution)};return new fl(i)}function ml(n,e,t,i){e=e!==void 0?e:Ba,t=ht(t!==void 0?t:Js);const s=en(n),l=Fe(n);i=i>0?i:Math.max(l/t[0],s/t[1]);const a=e+1,o=new Array(a);for(let r=0;r<a;++r)o[r]=i/Math.pow(2,r);return o}function yr(n,e,t,i){const s=Gi(n);return vr(s,e,t,i)}function Gi(n){n=Vi(n);let e=n.getExtent();if(!e){const t=180*tl.degrees/n.getMetersPerUnit();e=el(-t,-t,t,t)}return e}const pr=/\{z\}/g,br=/\{x\}/g,Er=/\{y\}/g,Sr=/\{-y\}/g;function xr(n,e,t,i,s){return n.replace(pr,e.toString()).replace(br,t.toString()).replace(Er,i.toString()).replace(Sr,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-i).toString()})}function wr(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let l;for(l=i;l<=s;++l)e.push(n.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}function Cr(n,e){return function(t,i,s){if(!t)return;let l;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(l=o.getHeight()-1)}return xr(n,a,t[1],t[2],l)}}function Tr(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Cr(n[s],e);return Pr(i)}function Pr(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const s=ur(e),l=Tn(s,n.length);return n[l](e,t,i)}}class Lr extends Ga{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ht(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ve(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,s,l){return kn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:gl(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),l=this.getTilePixelRatio(t),a=ht(s.getTileSize(e),this.tmpSize);return l==1?a:ja(a,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=mr(s,e,i)),dr(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Rr extends Kn{constructor(e,t){super(e),this.tile=t}}const ci={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class ji extends Lr{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ji.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ve(t),s=t.getState();let l;s==q.LOADING?(this.tileLoadingKeys_[i]=!0,l=ci.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],l=s==q.ERROR?ci.TILELOADERROR:s==q.LOADED?ci.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new Rr(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=wr(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Tr(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class Ir extends ji{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ar,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:dl,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!ii(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ii(t,e)))return this.tileGrid;const i=Ve(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=gl(e)),this.tileGridForProjection[i]}createTile_(e,t,i,s,l,a){const o=[e,t,i],r=this.getTileCoordForTileUrlFunction(o,l),c=r?this.tileUrlFunction(r,s,l):void 0,u=new this.tileClass(o,c!==void 0?q.IDLE:q.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=a,u.addEventListener(le.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,s,l){const a=this.getProjection();if(!a||!l||ii(a,l))return this.getTileInternal(e,t,i,s,a||l);const o=[e,t,i],r=this.getKey(),c=this.getTileGridForProjection(a),u=this.getTileGridForProjection(l),h=this.getTileCoordForTileUrlFunction(o,l),y=new hl(a,c,l,u,o,h,this.getTilePixelRatio(s),this.getGutter(),(m,g,x,E)=>this.getTileInternal(m,g,x,E,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=r,y}getTileInternal(e,t,i,s,l){const a=this.getKey();return this.createTile_(e,t,i,s,l,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Vi(e);if(i){const s=Ve(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function Ar(n,e){n.getImage().src=e}class xs extends Ir{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:_r({extent:Gi(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}function kr(n,e,t,i){var s=e.getLayers();e.removeLayer(s.item(0)),n==0?e.addLayer(t):n==1&&e.addLayer(i),e.render()}const ws=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],tt=(()=>{if(typeof document>"u")return!1;const n=ws[0],e={};for(const t of ws)if((t==null?void 0:t[1])in document){for(const[s,l]of t.entries())e[n[s]]=l;return e}return!1})(),Cs={change:tt.fullscreenchange,error:tt.fullscreenerror};let Ae={request(n=document.documentElement,e){return new Promise((t,i)=>{const s=()=>{Ae.off("change",s),t()};Ae.on("change",s);const l=n[tt.requestFullscreen](e);l instanceof Promise&&l.then(s).catch(i)})},exit(){return new Promise((n,e)=>{if(!Ae.isFullscreen){n();return}const t=()=>{Ae.off("change",t),n()};Ae.on("change",t);const i=document[tt.exitFullscreen]();i instanceof Promise&&i.then(t).catch(e)})},toggle(n,e){return Ae.isFullscreen?Ae.exit():Ae.request(n,e)},onchange(n){Ae.on("change",n)},onerror(n){Ae.on("error",n)},on(n,e){const t=Cs[n];t&&document.addEventListener(t,e,!1)},off(n,e){const t=Cs[n];t&&document.removeEventListener(t,e,!1)},raw:tt};Object.defineProperties(Ae,{isFullscreen:{get:()=>!!document[tt.fullscreenElement]},element:{enumerable:!0,get:()=>document[tt.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[tt.fullscreenEnabled]}});tt||(Ae={isEnabled:!1});const vl=Ci("store",()=>({location:$(!0)})),Fr=Ke({name:"QField",inheritAttrs:!1,props:{...Ti,tag:{type:String,default:"label"}},emits:As,setup(){return ks(Fs({tagProp:!0}))}});let zn=!1;{const n=document.createElement("div");n.setAttribute("dir","rtl"),Object.assign(n.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(n),n.appendChild(e),n.scrollLeft=-1e3,zn=n.scrollLeft>=0,n.remove()}const Ue=1e3,Dr=["start","center","end","start-force","center-force","end-force"],_l=Array.prototype.filter,Or=window.getComputedStyle(document.body).overflowAnchor===void 0?Rl:function(n,e){n!==null&&(n._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(n._qOverflowAnimationFrame),n._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(n===null)return;n._qOverflowAnimationFrame=void 0;const t=n.children||[];_l.call(t,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const i=t[e];i!=null&&i.dataset&&(i.dataset.qVsAnchor="")}))};function Ht(n,e){return n+e}function di(n,e,t,i,s,l,a,o){const r=n===window?document.scrollingElement||document.documentElement:n,c=s===!0?"offsetWidth":"offsetHeight",u={scrollStart:0,scrollViewSize:-a-o,scrollMaxSize:0,offsetStart:-a,offsetEnd:-o};if(s===!0?(n===window?(u.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,u.scrollViewSize+=document.documentElement.clientWidth):(u.scrollStart=r.scrollLeft,u.scrollViewSize+=r.clientWidth),u.scrollMaxSize=r.scrollWidth,l===!0&&(u.scrollStart=(zn===!0?u.scrollMaxSize-u.scrollViewSize:0)-u.scrollStart)):(n===window?(u.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,u.scrollViewSize+=document.documentElement.clientHeight):(u.scrollStart=r.scrollTop,u.scrollViewSize+=r.clientHeight),u.scrollMaxSize=r.scrollHeight),t!==null)for(let h=t.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(u.offsetStart+=h[c]);if(i!==null)for(let h=i.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(u.offsetEnd+=h[c]);if(e!==n){const h=r.getBoundingClientRect(),y=e.getBoundingClientRect();s===!0?(u.offsetStart+=y.left-h.left,u.offsetEnd-=y.width):(u.offsetStart+=y.top-h.top,u.offsetEnd-=y.height),n!==window&&(u.offsetStart+=u.scrollStart),u.offsetEnd+=u.scrollMaxSize-u.offsetStart}return u}function Ts(n,e,t,i){e==="end"&&(e=(n===window?document.body:n)[t===!0?"scrollWidth":"scrollHeight"]),n===window?t===!0?(i===!0&&(e=(zn===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):t===!0?(i===!0&&(e=(zn===!0?n.scrollWidth-n.offsetWidth:0)-e),n.scrollLeft=e):n.scrollTop=e}function Yt(n,e,t,i){if(t>=i)return 0;const s=e.length,l=Math.floor(t/Ue),a=Math.floor((i-1)/Ue)+1;let o=n.slice(l,a).reduce(Ht,0);return t%Ue!==0&&(o-=e.slice(l*Ue,t).reduce(Ht,0)),i%Ue!==0&&i!==s&&(o-=e.slice(i,a*Ue).reduce(Ht,0)),o}const yl={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},pl=Object.keys(yl),wi={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...yl};function bl({virtualScrollLength:n,getVirtualScrollTarget:e,getVirtualScrollEl:t,virtualScrollItemSizeComputed:i}){const s=Xe(),{props:l,emit:a,proxy:o}=s,{$q:r}=o;let c,u,h,y=[],m;const g=$(0),x=$(0),E=$({}),L=$(null),S=$(null),v=$(null),f=$({from:0,to:0}),b=T(()=>l.tableColspan!==void 0?l.tableColspan:100);i===void 0&&(i=T(()=>l.virtualScrollItemSize));const F=T(()=>i.value+";"+l.virtualScrollHorizontal),O=T(()=>F.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter);me(O,()=>{ie()}),me(F,P);function P(){ne(u,!0)}function K(p){ne(p===void 0?u:p)}function j(p,R){const M=e();if(M==null||M.nodeType===8)return;const Z=di(M,t(),L.value,S.value,l.virtualScrollHorizontal,r.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);h!==Z.scrollViewSize&&ie(Z.scrollViewSize),X(M,Z,Math.min(n.value-1,Math.max(0,parseInt(p,10)||0)),0,Dr.indexOf(R)!==-1?R:u!==-1&&p>u?"end":"start")}function J(){const p=e();if(p==null||p.nodeType===8)return;const R=di(p,t(),L.value,S.value,l.virtualScrollHorizontal,r.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),M=n.value-1,Z=R.scrollMaxSize-R.offsetStart-R.offsetEnd-x.value;if(c===R.scrollStart)return;if(R.scrollMaxSize<=0){X(p,R,0,0);return}h!==R.scrollViewSize&&ie(R.scrollViewSize),U(f.value.from);const Y=Math.floor(R.scrollMaxSize-Math.max(R.scrollViewSize,R.offsetEnd)-Math.min(m[M],R.scrollViewSize/2));if(Y>0&&Math.ceil(R.scrollStart)>=Y){X(p,R,M,R.scrollMaxSize-R.offsetEnd-y.reduce(Ht,0));return}let G=0,z=R.scrollStart-R.offsetStart,te=z;if(z<=Z&&z+R.scrollViewSize>=g.value)z-=g.value,G=f.value.from,te=z;else for(let B=0;z>=y[B]&&G<M;B++)z-=y[B],G+=Ue;for(;z>0&&G<M;)z-=m[G],z>-R.scrollViewSize?(G++,te=z):te=m[G]+z;X(p,R,G,te)}function X(p,R,M,Z,Y){const G=typeof Y=="string"&&Y.indexOf("-force")!==-1,z=G===!0?Y.replace("-force",""):Y,te=z!==void 0?z:"start";let B=Math.max(0,M-E.value[te]),ae=B+E.value.total;ae>n.value&&(ae=n.value,B=Math.max(0,ae-E.value.total)),c=R.scrollStart;const Le=B!==f.value.from||ae!==f.value.to;if(Le===!1&&z===void 0){se(M);return}const{activeElement:st}=document,we=v.value;Le===!0&&we!==null&&we!==st&&we.contains(st)===!0&&(we.addEventListener("focusout",ue),setTimeout(()=>{we==null||we.removeEventListener("focusout",ue)})),Or(we,M-B);const We=z!==void 0?m.slice(B,M).reduce(Ht,0):0;if(Le===!0){const Ee=ae>=f.value.from&&B<=f.value.to?f.value.to:ae;f.value={from:B,to:Ee},g.value=Yt(y,m,0,B),x.value=Yt(y,m,ae,n.value),requestAnimationFrame(()=>{f.value.to!==ae&&c===R.scrollStart&&(f.value={from:f.value.from,to:ae},x.value=Yt(y,m,ae,n.value))})}requestAnimationFrame(()=>{if(c!==R.scrollStart)return;Le===!0&&U(B);const Ee=m.slice(B,M).reduce(Ht,0),Se=Ee+R.offsetStart+g.value,De=Se+m[M];let Ne=Se+Z;if(z!==void 0){const lt=Ee-We,He=R.scrollStart+lt;Ne=G!==!0&&He<Se&&De<He+R.scrollViewSize?He:z==="end"?De-R.scrollViewSize:Se-(z==="start"?0:Math.round((R.scrollViewSize-m[M])/2))}c=Ne,Ts(p,Ne,l.virtualScrollHorizontal,r.lang.rtl),se(M)})}function U(p){const R=v.value;if(R){const M=_l.call(R.children,B=>B.classList&&B.classList.contains("q-virtual-scroll--skip")===!1),Z=M.length,Y=l.virtualScrollHorizontal===!0?B=>B.getBoundingClientRect().width:B=>B.offsetHeight;let G=p,z,te;for(let B=0;B<Z;){for(z=Y(M[B]),B++;B<Z&&M[B].classList.contains("q-virtual-scroll--with-prev")===!0;)z+=Y(M[B]),B++;te=z-m[G],te!==0&&(m[G]+=te,y[Math.floor(G/Ue)]+=te),G++}}}function ue(){var p;(p=v.value)==null||p.focus()}function ne(p,R){const M=1*i.value;(R===!0||Array.isArray(m)===!1)&&(m=[]);const Z=m.length;m.length=n.value;for(let G=n.value-1;G>=Z;G--)m[G]=M;const Y=Math.floor((n.value-1)/Ue);y=[];for(let G=0;G<=Y;G++){let z=0;const te=Math.min((G+1)*Ue,n.value);for(let B=G*Ue;B<te;B++)z+=m[B];y.push(z)}u=-1,c=void 0,g.value=Yt(y,m,0,f.value.from),x.value=Yt(y,m,f.value.to,n.value),p>=0?(U(f.value.from),Ze(()=>{j(p)})):ee()}function ie(p){if(p===void 0&&typeof window<"u"){const z=e();z!=null&&z.nodeType!==8&&(p=di(z,t(),L.value,S.value,l.virtualScrollHorizontal,r.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}h=p;const R=parseFloat(l.virtualScrollSliceRatioBefore)||0,M=parseFloat(l.virtualScrollSliceRatioAfter)||0,Z=1+R+M,Y=p===void 0||p<=0?1:Math.ceil(p/i.value),G=Math.max(1,Y,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/Z));E.value={total:Math.ceil(G*Z),start:Math.ceil(G*R),center:Math.ceil(G*(.5+R)),end:Math.ceil(G*(1+R)),view:Y}}function Ce(p,R){const M=l.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+M]:i.value+"px"};return[p==="tbody"?C(p,{class:"q-virtual-scroll__padding",key:"before",ref:L},[C("tr",[C("td",{style:{[M]:`${g.value}px`,...Z},colspan:b.value})])]):C(p,{class:"q-virtual-scroll__padding",key:"before",ref:L,style:{[M]:`${g.value}px`,...Z}}),C(p,{class:"q-virtual-scroll__content",key:"content",ref:v,tabindex:-1},R.flat()),p==="tbody"?C(p,{class:"q-virtual-scroll__padding",key:"after",ref:S},[C("tr",[C("td",{style:{[M]:`${x.value}px`,...Z},colspan:b.value})])]):C(p,{class:"q-virtual-scroll__padding",key:"after",ref:S,style:{[M]:`${x.value}px`,...Z}})]}function se(p){u!==p&&(l.onVirtualScroll!==void 0&&a("virtualScroll",{index:p,from:f.value.from,to:f.value.to-1,direction:p<u?"decrease":"increase",ref:o}),u=p)}ie();const ee=Il(J,r.platform.is.ios===!0?120:35);Pi(()=>{ie()});let he=!1;return Ds(()=>{he=!0}),Os(()=>{if(he!==!0)return;const p=e();c!==void 0&&p!==void 0&&p!==null&&p.nodeType!==8?Ts(p,c,l.virtualScrollHorizontal,r.lang.rtl):j(u)}),St(()=>{ee.cancel()}),Object.assign(o,{scrollTo:j,reset:P,refresh:K}),{virtualScrollSliceRange:f,virtualScrollSliceSizeComputed:E,setVirtualScrollSize:ie,onVirtualScrollEvt:ee,localResetVirtualScroll:ne,padVirtualScroll:Ce,scrollTo:j,reset:P,refresh:K}}const Ps=n=>["add","add-unique","toggle"].includes(n),Mr=".*+?^${}()|[]\\",zr=Object.keys(Ti);function hi(n,e){if(typeof n=="function")return n;const t=n!==void 0?n:e;return i=>i!==null&&typeof i=="object"&&t in i?i[t]:i}const El=Ke({name:"QSelect",inheritAttrs:!1,props:{...wi,...Ms,...Ti,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ps},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:n=>["default","menu","dialog"].includes(n),default:"default"},virtualScrollItemSize:wi.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...As,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(n,{slots:e,emit:t}){const{proxy:i}=Xe(),{$q:s}=i,l=$(!1),a=$(!1),o=$(-1),r=$(""),c=$(!1),u=$(!1);let h=null,y=null,m,g,x,E=null,L,S,v,f;const b=$(null),F=$(null),O=$(null),P=$(null),K=$(null),j=Al(n),J=kl(_),X=T(()=>Array.isArray(n.options)?n.options.length:0),U=T(()=>n.virtualScrollItemSize===void 0?n.optionsDense===!0?24:48:n.virtualScrollItemSize),{virtualScrollSliceRange:ue,virtualScrollSliceSizeComputed:ne,localResetVirtualScroll:ie,padVirtualScroll:Ce,onVirtualScrollEvt:se,scrollTo:ee,setVirtualScrollSize:he}=bl({virtualScrollLength:X,getVirtualScrollTarget:$n,getVirtualScrollEl:mn,virtualScrollItemSizeComputed:U}),p=Fs(),R=T(()=>{const d=n.mapOptions===!0&&n.multiple!==!0,I=n.modelValue!==void 0&&(n.modelValue!==null||d===!0)?n.multiple===!0&&Array.isArray(n.modelValue)?n.modelValue:[n.modelValue]:[];if(n.mapOptions===!0&&Array.isArray(n.options)===!0){const D=n.mapOptions===!0&&m!==void 0?m:[],Q=I.map(oe=>Un(oe,D));return n.modelValue===null&&d===!0?Q.filter(oe=>oe!==null):Q}return I}),M=T(()=>{const d={};return zr.forEach(I=>{const D=n[I];D!==void 0&&(d[I]=D)}),d}),Z=T(()=>n.optionsDark===null?p.isDark.value:n.optionsDark),Y=T(()=>Yi(R.value)),G=T(()=>{let d="q-field__input q-placeholder col";return n.hideSelected===!0||R.value.length===0?[d,n.inputClass]:(d+=" q-field__input--padding",n.inputClass===void 0?d:[d,n.inputClass])}),z=T(()=>(n.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(n.popupContentClass?" "+n.popupContentClass:"")),te=T(()=>X.value===0),B=T(()=>R.value.map(d=>Pe.value(d)).join(", ")),ae=T(()=>n.displayValue!==void 0?n.displayValue:B.value),Le=T(()=>n.optionsHtml===!0?()=>!0:d=>(d==null?void 0:d.html)===!0),st=T(()=>n.displayValueHtml===!0||n.displayValue===void 0&&(n.optionsHtml===!0||R.value.some(Le.value))),we=T(()=>p.focused.value===!0?n.tabindex:-1),We=T(()=>{const d={tabindex:n.tabindex,role:"combobox","aria-label":n.label,"aria-readonly":n.readonly===!0?"true":"false","aria-autocomplete":n.useInput===!0?"list":"none","aria-expanded":l.value===!0?"true":"false","aria-controls":`${p.targetUid.value}_lb`};return o.value>=0&&(d["aria-activedescendant"]=`${p.targetUid.value}_${o.value}`),d}),Ee=T(()=>({id:`${p.targetUid.value}_lb`,role:"listbox","aria-multiselectable":n.multiple===!0?"true":"false"})),Se=T(()=>R.value.map((d,I)=>({index:I,opt:d,html:Le.value(d),selected:!0,removeAtIndex:jn,toggleOption:Be,tabindex:we.value}))),De=T(()=>{if(X.value===0)return[];const{from:d,to:I}=ue.value;return n.options.slice(d,I).map((D,Q)=>{const oe=_e.value(D)===!0,ye=Lt(D)===!0,re=d+Q,pe={clickable:!0,active:ye,activeClass:He.value,manualFocus:!0,focused:!1,disable:oe,tabindex:-1,dense:n.optionsDense,dark:Z.value,role:"option","aria-selected":ye===!0?"true":"false",id:`${p.targetUid.value}_${re}`,onClick:()=>{Be(D)}};return oe!==!0&&(o.value===re&&(pe.focused=!0),s.platform.is.desktop===!0&&(pe.onMousemove=()=>{l.value===!0&&Oe(re)})),{index:re,opt:D,html:Le.value(D),label:Pe.value(D),selected:pe.active,focused:pe.focused,toggleOption:Be,setOptionIndex:Oe,itemProps:pe}})}),Ne=T(()=>n.dropdownIcon!==void 0?n.dropdownIcon:s.iconSet.arrow.dropdown),lt=T(()=>n.optionsCover===!1&&n.outlined!==!0&&n.standout!==!0&&n.borderless!==!0&&n.rounded!==!0),He=T(()=>n.optionsSelectedClass!==void 0?n.optionsSelectedClass:n.color!==void 0?`text-${n.color}`:""),Te=T(()=>hi(n.optionValue,"value")),Pe=T(()=>hi(n.optionLabel,"label")),_e=T(()=>hi(n.optionDisable,"disable")),gt=T(()=>R.value.map(Te.value)),dn=T(()=>{const d={onInput:_,onChange:J,onKeydown:mt,onKeyup:Rt,onKeypress:$t,onFocus:Ut,onClick(I){g===!0&&Mt(I)}};return d.onCompositionstart=d.onCompositionupdate=d.onCompositionend=J,d});me(R,d=>{m=d,n.useInput===!0&&n.fillInput===!0&&n.multiple!==!0&&p.innerLoading.value!==!0&&(a.value!==!0&&l.value!==!0||Y.value!==!0)&&(x!==!0&&Ft(),(a.value===!0||l.value===!0)&&N(""))},{immediate:!0}),me(()=>n.fillInput,Ft),me(l,Yn),me(X,Tl);function hn(d){return n.emitValue===!0?Te.value(d):d}function Pt(d){if(d!==-1&&d<R.value.length)if(n.multiple===!0){const I=n.modelValue.slice();t("remove",{index:d,value:I.splice(d,1)[0]}),t("update:modelValue",I)}else t("update:modelValue",null)}function jn(d){Pt(d),p.focus()}function fn(d,I){const D=hn(d);if(n.multiple!==!0){n.fillInput===!0&&H(Pe.value(d),!0,!0),t("update:modelValue",D);return}if(R.value.length===0){t("add",{index:0,value:D}),t("update:modelValue",n.multiple===!0?[D]:D);return}if(I===!0&&Lt(d)===!0||n.maxValues!==void 0&&n.modelValue.length>=n.maxValues)return;const Q=n.modelValue.slice();t("add",{index:Q.length,value:D}),Q.push(D),t("update:modelValue",Q)}function Be(d,I){var ye;if(p.editable.value!==!0||d===void 0||_e.value(d)===!0)return;const D=Te.value(d);if(n.multiple!==!0){I!==!0&&(H(n.fillInput===!0?Pe.value(d):"",!0,!0),vt()),(ye=F.value)==null||ye.focus(),(R.value.length===0||Xt(Te.value(R.value[0]),D)!==!0)&&t("update:modelValue",n.emitValue===!0?D:d);return}if((g!==!0||c.value===!0)&&p.focus(),Ut(),R.value.length===0){const re=n.emitValue===!0?D:d;t("add",{index:0,value:re}),t("update:modelValue",n.multiple===!0?[re]:re);return}const Q=n.modelValue.slice(),oe=gt.value.findIndex(re=>Xt(re,D));if(oe!==-1)t("remove",{index:oe,value:Q.splice(oe,1)[0]});else{if(n.maxValues!==void 0&&Q.length>=n.maxValues)return;const re=n.emitValue===!0?D:d;t("add",{index:Q.length,value:re}),Q.push(re)}t("update:modelValue",Q)}function Oe(d){if(s.platform.is.desktop!==!0)return;const I=d!==-1&&d<X.value?d:-1;o.value!==I&&(o.value=I)}function Ge(d=1,I){if(l.value===!0){let D=o.value;do D=gs(D+d,-1,X.value-1);while(D!==-1&&D!==o.value&&_e.value(n.options[D])===!0);o.value!==D&&(Oe(D),ee(D),I!==!0&&n.useInput===!0&&n.fillInput===!0&&A(D>=0?Pe.value(n.options[D]):L,!0))}}function Un(d,I){const D=Q=>Xt(Te.value(Q),d);return n.options.find(D)||I.find(D)||d}function Lt(d){const I=Te.value(d);return gt.value.find(D=>Xt(D,I))!==void 0}function Ut(d){n.useInput===!0&&F.value!==null&&(d===void 0||F.value===d.target&&d.target.value===B.value)&&F.value.select()}function gn(d){Ol(d,27)===!0&&l.value===!0&&(Mt(d),vt(),Ft()),t("keyup",d)}function Rt(d){const{value:I}=d.target;if(d.keyCode!==void 0){gn(d);return}if(d.target.value="",h!==null&&(clearTimeout(h),h=null),y!==null&&(clearTimeout(y),y=null),Ft(),typeof I=="string"&&I.length!==0){const D=I.toLocaleLowerCase(),Q=ye=>{const re=n.options.find(pe=>String(ye.value(pe)).toLocaleLowerCase()===D);return re===void 0?!1:(R.value.indexOf(re)===-1?Be(re):vt(),!0)},oe=ye=>{Q(Te)!==!0&&ye!==!0&&Q(Pe)!==!0&&N(I,!0,()=>oe(!0))};oe()}else p.clearValue(d)}function $t(d){t("keypress",d)}function mt(d){if(t("keydown",d),Fl(d)===!0)return;const I=r.value.length!==0&&(n.newValueMode!==void 0||n.onNewValue!==void 0),D=d.shiftKey!==!0&&n.disableTabSelection!==!0&&n.multiple!==!0&&(o.value!==-1||I===!0);if(d.keyCode===27){Qn(d);return}if(d.keyCode===9&&D===!1){At();return}if(d.target===void 0||d.target.id!==p.targetUid.value||p.editable.value!==!0)return;if(d.keyCode===40&&p.innerLoading.value!==!0&&l.value===!1){Ye(d),kt();return}if(d.keyCode===8&&(n.useChips===!0||n.clearable===!0)&&n.hideSelected!==!0&&r.value.length===0){n.multiple===!0&&Array.isArray(n.modelValue)===!0?Pt(n.modelValue.length-1):n.multiple!==!0&&n.modelValue!==null&&t("update:modelValue",null);return}(d.keyCode===35||d.keyCode===36)&&(typeof r.value!="string"||r.value.length===0)&&(Ye(d),o.value=-1,Ge(d.keyCode===36?1:-1,n.multiple)),(d.keyCode===33||d.keyCode===34)&&ne.value!==void 0&&(Ye(d),o.value=Math.max(-1,Math.min(X.value,o.value+(d.keyCode===33?-1:1)*ne.value.view)),Ge(d.keyCode===33?1:-1,n.multiple)),(d.keyCode===38||d.keyCode===40)&&(Ye(d),Ge(d.keyCode===38?-1:1,n.multiple));const Q=X.value;if((v===void 0||f<Date.now())&&(v=""),Q>0&&n.useInput!==!0&&d.key!==void 0&&d.key.length===1&&d.altKey===!1&&d.ctrlKey===!1&&d.metaKey===!1&&(d.keyCode!==32||v.length!==0)){l.value!==!0&&kt(d);const oe=d.key.toLocaleLowerCase(),ye=v.length===1&&v[0]===oe;f=Date.now()+1500,ye===!1&&(Ye(d),v+=oe);const re=new RegExp("^"+v.split("").map(Dt=>Mr.indexOf(Dt)!==-1?"\\"+Dt:Dt).join(".*"),"i");let pe=o.value;if(ye===!0||pe<0||re.test(Pe.value(n.options[pe]))!==!0)do pe=gs(pe+1,-1,Q-1);while(pe!==o.value&&(_e.value(n.options[pe])===!0||re.test(Pe.value(n.options[pe]))!==!0));o.value!==pe&&Ze(()=>{Oe(pe),ee(pe),pe>=0&&n.useInput===!0&&n.fillInput===!0&&A(Pe.value(n.options[pe]),!0)});return}if(!(d.keyCode!==13&&(d.keyCode!==32||n.useInput===!0||v!=="")&&(d.keyCode!==9||D===!1))){if(d.keyCode!==9&&Ye(d),o.value!==-1&&o.value<Q){Be(n.options[o.value]);return}if(I===!0){const oe=(ye,re)=>{var Dt;if(re){if(Ps(re)!==!0)return}else re=n.newValueMode;if(H("",n.multiple!==!0,!0),ye==null)return;(re==="toggle"?Be:fn)(ye,re==="add-unique"),n.multiple!==!0&&((Dt=F.value)==null||Dt.focus(),vt())};if(n.onNewValue!==void 0?t("newValue",r.value,oe):oe(r.value),n.multiple!==!0)return}l.value===!0?At():p.innerLoading.value!==!0&&kt()}}function mn(){return g===!0?K.value:O.value!==null&&O.value.contentEl!==null?O.value.contentEl:void 0}function $n(){return mn()}function Xn(){return n.hideSelected===!0?[]:e["selected-item"]!==void 0?Se.value.map(d=>e["selected-item"](d)).slice():e.selected!==void 0?[].concat(e.selected()):n.useChips===!0?Se.value.map((d,I)=>C(na,{key:"option-"+I,removable:p.editable.value===!0&&_e.value(d.opt)!==!0,dense:!0,textColor:n.color,tabindex:we.value,onRemove(){d.removeAtIndex(I)}},()=>C("span",{class:"ellipsis",[d.html===!0?"innerHTML":"textContent"]:Pe.value(d.opt)}))):[C("span",{class:"ellipsis",[st.value===!0?"innerHTML":"textContent"]:ae.value})]}function vn(){if(te.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:r.value}):void 0;const d=e.option!==void 0?e.option:D=>C(je,{key:D.index,...D.itemProps},()=>C(ze,()=>C(nl,()=>C("span",{[D.html===!0?"innerHTML":"textContent"]:D.label}))));let I=Ce("div",De.value.map(d));return e["before-options"]!==void 0&&(I=e["before-options"]().concat(I)),Nn(e["after-options"],I)}function Wn(d,I){const D=I===!0?{...We.value,...p.splitAttrs.attributes.value}:void 0,Q={ref:I===!0?F:void 0,key:"i_t",class:G.value,style:n.inputStyle,value:r.value!==void 0?r.value:"",type:"search",...D,id:I===!0?p.targetUid.value:void 0,maxlength:n.maxlength,autocomplete:n.autocomplete,"data-autofocus":d===!0||n.autofocus===!0||void 0,disabled:n.disable===!0,readonly:n.readonly===!0,...dn.value};return d!==!0&&g===!0&&(Array.isArray(Q.class)===!0?Q.class=[...Q.class,"no-pointer-events"]:Q.class+=" no-pointer-events"),C("input",Q)}function _(d){h!==null&&(clearTimeout(h),h=null),y!==null&&(clearTimeout(y),y=null),!(d&&d.target&&d.target.qComposing===!0)&&(A(d.target.value||""),x=!0,L=r.value,p.focused.value!==!0&&(g!==!0||c.value===!0)&&p.focus(),n.onFilter!==void 0&&(h=setTimeout(()=>{h=null,N(r.value)},n.inputDebounce)))}function A(d,I){r.value!==d&&(r.value=d,I===!0||n.inputDebounce===0||n.inputDebounce==="0"?t("inputValue",d):y=setTimeout(()=>{y=null,t("inputValue",d)},n.inputDebounce))}function H(d,I,D){x=D!==!0,n.useInput===!0&&(A(d,!0),(I===!0||D!==!0)&&(L=d),I!==!0&&N(d))}function N(d,I,D){if(n.onFilter===void 0||I!==!0&&p.focused.value!==!0)return;p.innerLoading.value===!0?t("filterAbort"):(p.innerLoading.value=!0,u.value=!0),d!==""&&n.multiple!==!0&&R.value.length!==0&&x!==!0&&d===Pe.value(R.value[0])&&(d="");const Q=setTimeout(()=>{l.value===!0&&(l.value=!1)},10);E!==null&&clearTimeout(E),E=Q,t("filter",d,(oe,ye)=>{(I===!0||p.focused.value===!0)&&E===Q&&(clearTimeout(E),typeof oe=="function"&&oe(),u.value=!1,Ze(()=>{p.innerLoading.value=!1,p.editable.value===!0&&(I===!0?l.value===!0&&vt():l.value===!0?Yn(!0):l.value=!0),typeof ye=="function"&&Ze(()=>{ye(i)}),typeof D=="function"&&Ze(()=>{D(i)})}))},()=>{p.focused.value===!0&&E===Q&&(clearTimeout(E),p.innerLoading.value=!1,u.value=!1),l.value===!0&&(l.value=!1)})}function W(){return C(Pn,{ref:O,class:z.value,style:n.popupContentStyle,modelValue:l.value,fit:n.menuShrink!==!0,cover:n.optionsCover===!0&&te.value!==!0&&n.useInput!==!0,anchor:n.menuAnchor,self:n.menuSelf,offset:n.menuOffset,dark:Z.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:n.popupNoRouteDismiss,square:lt.value,transitionShow:n.transitionShow,transitionHide:n.transitionHide,transitionDuration:n.transitionDuration,separateClosePopup:!0,...Ee.value,onScrollPassive:se,onBeforeShow:$i,onBeforeHide:fe,onShow:ce},vn)}function fe(d){Xi(d),At()}function ce(){he()}function Me(d){var I;Mt(d),(I=F.value)==null||I.focus(),c.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function de(d){Mt(d),Ze(()=>{c.value=!1})}function Qe(){const d=[C(Fr,{class:`col-auto ${p.fieldClass.value}`,...M.value,for:p.targetUid.value,dark:Z.value,square:!0,loading:u.value,itemAligned:!1,filled:!0,stackLabel:r.value.length!==0,...p.splitAttrs.listeners.value,onFocus:Me,onBlur:de},{...e,rawControl:()=>p.getControl(!0),before:void 0,after:void 0})];return l.value===!0&&d.push(C("div",{ref:K,class:z.value+" scroll",style:n.popupContentStyle,...Ee.value,onClick:Qn,onScrollPassive:se},vn())),C(Bt,{ref:P,modelValue:a.value,position:n.useInput===!0?"top":void 0,transitionShow:S,transitionHide:n.transitionHide,transitionDuration:n.transitionDuration,noRouteDismiss:n.popupNoRouteDismiss,onBeforeShow:$i,onBeforeHide:It,onHide:Zn,onShow:Cl},()=>C("div",{class:"q-select__dialog"+(Z.value===!0?" q-select__dialog--dark q-dark":"")+(c.value===!0?" q-select__dialog--focused":"")},d))}function It(d){Xi(d),P.value!==null&&P.value.__updateRefocusTarget(p.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),p.focused.value=!1}function Zn(d){vt(),p.focused.value===!1&&t("blur",d),Ft()}function Cl(){const d=document.activeElement;(d===null||d.id!==p.targetUid.value)&&F.value!==null&&F.value!==d&&F.value.focus(),he()}function At(){a.value!==!0&&(o.value=-1,l.value===!0&&(l.value=!1),p.focused.value===!1&&(E!==null&&(clearTimeout(E),E=null),p.innerLoading.value===!0&&(t("filterAbort"),p.innerLoading.value=!1,u.value=!1)))}function kt(d){p.editable.value===!0&&(g===!0?(p.onControlFocusin(d),a.value=!0,Ze(()=>{p.focus()})):p.focus(),n.onFilter!==void 0?N(r.value):(te.value!==!0||e["no-option"]!==void 0)&&(l.value=!0))}function vt(){a.value=!1,At()}function Ft(){n.useInput===!0&&H(n.multiple!==!0&&n.fillInput===!0&&R.value.length!==0&&Pe.value(R.value[0])||"",!0,!0)}function Yn(d){let I=-1;if(d===!0){if(R.value.length!==0){const D=Te.value(R.value[0]);I=n.options.findIndex(Q=>Xt(Te.value(Q),D))}ie(I)}Oe(I)}function Tl(d,I){l.value===!0&&p.innerLoading.value===!1&&(ie(-1,!0),Ze(()=>{l.value===!0&&p.innerLoading.value===!1&&(d>I?ie():Yn(!0))}))}function Ui(){a.value===!1&&O.value!==null&&O.value.updatePosition()}function $i(d){d!==void 0&&Mt(d),t("popupShow",d),p.hasPopupOpen=!0,p.onControlFocusin(d)}function Xi(d){d!==void 0&&Mt(d),t("popupHide",d),p.hasPopupOpen=!1,p.onControlFocusout(d)}function Wi(){g=s.platform.is.mobile!==!0&&n.behavior!=="dialog"?!1:n.behavior!=="menu"&&(n.useInput===!0?e["no-option"]!==void 0||n.onFilter!==void 0||te.value===!1:!0),S=s.platform.is.ios===!0&&g===!0&&n.useInput===!0?"fade":n.transitionShow}return zs(Wi),Dl(Ui),Wi(),St(()=>{h!==null&&clearTimeout(h),y!==null&&clearTimeout(y)}),Object.assign(i,{showPopup:kt,hidePopup:vt,removeAtIndex:Pt,add:fn,toggleOption:Be,getOptionIndex:()=>o.value,setOptionIndex:Oe,moveOptionSelection:Ge,filter:N,updateMenuPosition:Ui,updateInputValue:H,isOptionSelected:Lt,getEmittingOptionValue:hn,isOptionDisabled:(...d)=>_e.value.apply(null,d)===!0,getOptionValue:(...d)=>Te.value.apply(null,d),getOptionLabel:(...d)=>Pe.value.apply(null,d)}),Object.assign(p,{innerValue:R,fieldClass:T(()=>`q-select q-field--auto-height q-select--with${n.useInput!==!0?"out":""}-input q-select--with${n.useChips!==!0?"out":""}-chips q-select--${n.multiple===!0?"multiple":"single"}`),inputRef:b,targetRef:F,hasValue:Y,showPopup:kt,floatingLabel:T(()=>n.hideSelected!==!0&&Y.value===!0||typeof r.value=="number"||r.value.length!==0||Yi(n.displayValue)),getControlChild:()=>{if(p.editable.value!==!1&&(a.value===!0||te.value!==!0||e["no-option"]!==void 0))return g===!0?Qe():W();p.hasPopupOpen===!0&&(p.hasPopupOpen=!1)},controlEvents:{onFocusin(d){p.onControlFocusin(d)},onFocusout(d){p.onControlFocusout(d,()=>{Ft(),At()})},onClick(d){var I;if(Qn(d),g!==!0&&l.value===!0){At(),(I=F.value)==null||I.focus();return}kt(d)}},getControl:d=>{const I=Xn(),D=d===!0||a.value!==!0||g!==!0;if(n.useInput===!0)I.push(Wn(d,D));else if(p.editable.value===!0){const oe=D===!0?We.value:void 0;I.push(C("input",{ref:D===!0?F:void 0,key:"d_t",class:"q-select__focus-target",id:D===!0?p.targetUid.value:void 0,value:ae.value,readonly:!0,"data-autofocus":d===!0||n.autofocus===!0||void 0,...oe,onKeydown:mt,onKeyup:gn,onKeypress:$t})),D===!0&&typeof n.autocomplete=="string"&&n.autocomplete.length!==0&&I.push(C("input",{class:"q-select__autocomplete-input",autocomplete:n.autocomplete,tabindex:-1,onKeyup:Rt}))}if(j.value!==void 0&&n.disable!==!0&&gt.value.length!==0){const oe=gt.value.map(ye=>C("option",{value:ye,selected:!0}));I.push(C("select",{class:"hidden",name:j.value,multiple:n.multiple},oe))}const Q=n.useInput===!0||D!==!0?void 0:p.splitAttrs.attributes.value;return C("div",{class:"q-field__native row items-center",...Q,...p.splitAttrs.listeners.value},I)},getInnerAppend:()=>n.loading!==!0&&u.value!==!0&&n.hideDropdownIcon!==!0?[C(xt,{class:"q-select__dropdown-icon"+(l.value===!0?" rotate-180":""),name:Ne.value})]:null}),ks(p)}}),Sl=Ci("Chip",{state:()=>({chip:!1}),actions:{changeChip(){console.log(this.chip),this.chip=!this.chip}}}),Vr=Ke({name:"QRating",props:{...Vs,...Ms,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(n,{slots:e,emit:t}){const{proxy:{$q:i}}=Xe(),s=qs(n),l=Ml(n),a=zl(l),o=$(0);let r={};const c=T(()=>n.readonly!==!0&&n.disable!==!0),u=T(()=>`q-rating row inline items-center q-rating--${c.value===!0?"":"non-"}editable`+(n.noDimming===!0?" q-rating--no-dimming":"")+(n.disable===!0?" disabled":"")+(n.color!==void 0&&Array.isArray(n.color)===!1?` text-${n.color}`:"")),h=T(()=>{const v=Array.isArray(n.icon)===!0?n.icon.length:0,f=Array.isArray(n.iconSelected)===!0?n.iconSelected.length:0,b=Array.isArray(n.iconHalf)===!0?n.iconHalf.length:0,F=Array.isArray(n.color)===!0?n.color.length:0,O=Array.isArray(n.colorSelected)===!0?n.colorSelected.length:0,P=Array.isArray(n.colorHalf)===!0?n.colorHalf.length:0;return{iconLen:v,icon:v>0?n.icon[v-1]:n.icon,selIconLen:f,selIcon:f>0?n.iconSelected[f-1]:n.iconSelected,halfIconLen:b,halfIcon:b>0?n.iconHalf[f-1]:n.iconHalf,colorLen:F,color:F>0?n.color[F-1]:n.color,selColorLen:O,selColor:O>0?n.colorSelected[O-1]:n.colorSelected,halfColorLen:P,halfColor:P>0?n.colorHalf[P-1]:n.colorHalf}}),y=T(()=>{if(typeof n.iconAriaLabel=="string"){const v=n.iconAriaLabel.length!==0?`${n.iconAriaLabel} `:"";return f=>`${v}${f}`}if(Array.isArray(n.iconAriaLabel)===!0){const v=n.iconAriaLabel.length;if(v>0)return f=>n.iconAriaLabel[Math.min(f,v)-1]}return(v,f)=>`${f} ${v}`}),m=T(()=>{const v=[],f=h.value,b=Math.ceil(n.modelValue),F=c.value===!0?0:null,O=n.iconHalf===void 0||b===n.modelValue?-1:b;for(let P=1;P<=n.max;P++){const K=o.value===0&&n.modelValue>=P||o.value>0&&o.value>=P,j=O===P&&o.value<P,J=o.value>0&&(j===!0?b:n.modelValue)>=P&&o.value<P,X=j===!0?P<=f.halfColorLen?n.colorHalf[P-1]:f.halfColor:f.selColor!==void 0&&K===!0?P<=f.selColorLen?n.colorSelected[P-1]:f.selColor:P<=f.colorLen?n.color[P-1]:f.color,U=(j===!0?P<=f.halfIconLen?n.iconHalf[P-1]:f.halfIcon:f.selIcon!==void 0&&(K===!0||J===!0)?P<=f.selIconLen?n.iconSelected[P-1]:f.selIcon:P<=f.iconLen?n.icon[P-1]:f.icon)||i.iconSet.rating.icon;v.push({name:(j===!0?P<=f.halfIconLen?n.iconHalf[P-1]:f.halfIcon:f.selIcon!==void 0&&(K===!0||J===!0)?P<=f.selIconLen?n.iconSelected[P-1]:f.selIcon:P<=f.iconLen?n.icon[P-1]:f.icon)||i.iconSet.rating.icon,attrs:{tabindex:F,role:"radio","aria-checked":n.modelValue===P?"true":"false","aria-label":y.value(P,U)},iconClass:"q-rating__icon"+(K===!0||j===!0?" q-rating__icon--active":"")+(J===!0?" q-rating__icon--exselected":"")+(o.value===P?" q-rating__icon--hovered":"")+(X!==void 0?` text-${X}`:"")})}return v}),g=T(()=>{const v={role:"radiogroup"};return n.disable===!0&&(v["aria-disabled"]="true"),n.readonly===!0&&(v["aria-readonly"]="true"),v});function x(v){if(c.value===!0){const f=vo(parseInt(v,10),1,parseInt(n.max,10)),b=n.noReset!==!0&&n.modelValue===f?0:f;b!==n.modelValue&&t("update:modelValue",b),o.value=0}}function E(v){c.value===!0&&(o.value=v)}function L(v,f){switch(v.keyCode){case 13:case 32:return x(f),Ye(v);case 37:case 40:return r[`rt${f-1}`]&&r[`rt${f-1}`].focus(),Ye(v);case 39:case 38:return r[`rt${f+1}`]&&r[`rt${f+1}`].focus(),Ye(v)}}function S(){o.value=0}return zs(()=>{r={}}),()=>{const v=[];return m.value.forEach(({iconClass:f,name:b,attrs:F},O)=>{const P=O+1;v.push(C("div",{key:P,ref:K=>{r[`rt${P}`]=K},class:"q-rating__icon-container flex flex-center",...F,onClick(){x(P)},onMouseover(){E(P)},onMouseout:S,onFocus(){E(P)},onBlur:S,onKeyup(K){L(K,P)}},Nn(e[`tip-${P}`],[C(xt,{class:f,name:b})])))}),n.name!==void 0&&n.disable!==!0&&a(v,"push"),C("div",{class:u.value,style:s.value,...g.value},v)}}}),qr={class:"q-pa-md q-gutter-sm"},Nr={class:"row no-wrap items-center"},Kr={class:"col text-h6 ellipsis title"},Hr={class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},Br={class:"text-caption text-grey"},Gr={__name:"intoraction",setup(n){const e=Gt(),t=T(()=>e.recommendation),i=$(3),s=T(()=>e.recommendationCard);return an(()=>{e.nextRecommendation()}),(l,a)=>(xe(),nt("div",qr,[w(Bt,{modelValue:t.value,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value=o),"no-backdrop-dismiss":""},{default:k(()=>[w(yt,{class:"my-card cards"},{default:k(()=>[w(qi,{src:s.value[0].img},null,8,["src"]),w(et,null,{default:k(()=>[w(be,{fab:"",color:"primary",icon:"place",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"}}),V("div",Nr,[V("div",Kr,wt(s.value[0].name),1),V("div",Hr,[w(xt,{name:"place"}),a[4]||(a[4]=Ie(" 未知距离 "))])]),w(Vr,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=o=>i.value=o),max:5,size:"32px"},null,8,["modelValue"])]),_:1}),w(et,{class:"q-pt-none"},{default:k(()=>[V("div",Br,wt(s.value[0].intorduction),1)]),_:1}),w(pt),w(Ns,{align:"right"},{default:k(()=>[w(be,{flat:"",color:"primary",label:"下一张",onClick:a[1]||(a[1]=o=>it(e).nextRecommendation())}),w(be,{flat:"",color:"primary",round:"",icon:"event",onClick:a[2]||(a[2]=o=>it(e).recommendationChange())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},jr=ft(Gr,[["__scopeId","data-v-bd623d00"]]),Ur={class:"btn"},$r={class:"q-pa-md",style:{"max-width":"300px"}},Xr={class:"q-gutter-md"},Wr={__name:"btn",setup(n){const e=Sl(),t=Gt(),i=vl(),s=$([1]),l=$([{label:"学校地点",value:1},{label:"出行路线",value:2},{label:"周边介绍",value:3},{label:"快递点",value:4},{label:"弹窗介绍",value:5},{label:"校历",value:6},{label:"报道准备",value:7}]);return me(()=>[...s.value],(a,o)=>{console.log("变化了",a),a.length==0&&t.Init();const r=a==null?void 0:a.filter(u=>!(o!=null&&o.includes(u))),c=o==null?void 0:o.filter(u=>!(a!=null&&a.includes(u)));r==null||r.forEach(u=>{switch(u){case 1:t.local(),console.log("开启学校地点"),i.location=!0;break;case 2:console.log("开启出行路线"),t.pathChange();break;case 3:console.log("开启周边介绍"),t.addIntoration();break;case 4:console.log("开启快递点"),t.getExpress();break;case 5:console.log("开启弹窗介绍"),e.changeChip();break;case 6:console.log("开启校历"),t.showImgFu("https://s2.loli.net/2025/06/13/J3P7nDVsrl2RaLN.png");break;case 7:console.log("开启报道准备"),t.listPop();break}}),c==null||c.forEach(u=>{switch(u){case 1:console.log("关闭学校地点"),i.location=!1,t.removeLocal();break;case 2:console.log("关闭出行路线"),t.removePath();break;case 3:console.log("关闭周边介绍"),t.removeIntorduction();break;case 4:console.log("关闭快递点"),t.removeExpress();break;case 5:if(console.log("关闭弹窗介绍"),!e.chip)return;e.changeChip();break;case 6:console.log("关闭校历"),t.showImgFu();break;case 7:console.log("关闭报道准备");break}}),console.log("当前选中:",Nl(a))},{deep:!0,immediate:!0}),(a,o)=>(xe(),nt(nn,null,[w(jr),V("div",Ur,[V("div",$r,[V("div",Xr,[w(Ua,{color:"secondary","multi-line":""},{default:k(()=>[Ie(' 已选择: "'+wt(s.value)+'" ',1)]),_:1}),o[1]||(o[1]=V("div",{id:"ScaleLine"},null,-1)),w(El,{filled:"",modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=r=>s.value=r),options:l.value,label:"选择你的模式",multiple:"","emit-value":"","map-options":"","hide-bottom-space":""},{option:k(({itemProps:r,opt:c,selected:u,toggleOption:h})=>[w(je,Vl(r,{style:{color:"#000"}}),{default:k(()=>[w(ze,null,{default:k(()=>[w(nl,{innerHTML:c.label},null,8,["innerHTML"])]),_:2},1024),w(ze,{side:""},{default:k(()=>[w(ql,{"model-value":u,"onUpdate:modelValue":y=>h(c),class:"q-ma-sm"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])])])])],64))}},Zr=ft(Wr,[["__scopeId","data-v-9ce9e598"]]),Yr={class:"q-pa-sm"},Qr={class:"absolute-bottom bg-transparent"},Jr={class:"containt"},eu={class:"scroll"},tu={__name:"drawer",setup(n){return(e,t)=>(xe(),$e(il,{class:"fit"},{default:k(()=>[V("div",Yr,[w(qi,{class:"absolute-top",src:"https://s2.loli.net/2025/02/02/ELbK6urJqYvgBPj.jpg",style:{height:"150px"},id:"img","img-style":{opacity:.7}},{default:k(()=>[V("div",Qr,[w(co,{size:"56px",class:"q-mb-sm"},{default:k(()=>t[0]||(t[0]=[V("img",{src:"https://tse3-mm.cn.bing.net/th/id/OIP-C.T1Ir__YMxonBm9oaPK8dgwHaHa?rs=1&pid=ImgDetMain"},null,-1)])),_:1}),t[1]||(t[1]=V("div",{class:"text-weight-bold"},"广州大学",-1)),t[2]||(t[2]=V("div",null,"学校有大学城、桂花岗、黄埔三个校区，全校四万余人",-1))])]),_:1}),V("div",Jr,[w(Zr),V("div",eu,[w($a)])])])]),_:1}))}},nu=ft(tu,[["__scopeId","data-v-41086985"]]),fi="units",iu=[1,2,5],Qt=25.4/.28;class su extends Gn{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+on,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fi,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(fi)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(fi,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,s=this.getUnits(),l=s=="degrees"?"degrees":"m";let a=Dn(i,e.resolution,t,l);const o=this.minWidth_*(this.dpi_||Qt)/Qt,r=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Qt)/Qt:void 0;let c=o*a,u="";if(s=="degrees"){const v=tl.degrees;c*=v,c<v/60?(u="″",a*=3600):c<v?(u="′",a*=60):u="°"}else if(s=="imperial")c<.9144?(u="in",a/=.0254):c<1609.344?(u="ft",a/=.3048):(u="mi",a/=1609.344);else if(s=="nautical")a/=1852,u="NM";else if(s=="metric")c<1e-6?(u="nm",a*=1e9):c<.001?(u="μm",a*=1e6):c<1?(u="mm",a*=1e3):c<1e3?u="m":(u="km",a/=1e3);else if(s=="us")c<.9144?(u="in",a*=39.37):c<1609.344?(u="ft",a/=.30480061):(u="mi",a/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(o*a)/Math.log(10)),y,m,g,x=0,E,L;for(;;){g=Math.floor(h/3);const v=Math.pow(10,g);if(y=iu[(h%3+3)%3]*v,m=Math.round(y/a),isNaN(m)){this.element.style.display="none",this.renderedVisible_=!1;return}if(r!==void 0&&m>=r){y=x,m=E,g=L;break}else if(m>=o)break;x=y,E=m,L=g,++h}const S=this.scaleBar_?this.createScaleBar(m,y,u):y.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=S&&(this.innerElement_.innerHTML=S,this.renderedHTML_=S),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const s=this.getScaleForResolution(),l=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),a=this.scaleBarSteps_,o=e/a,r=[this.createMarker("absolute")];for(let u=0;u<a;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";r.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(u%2===0||a===2?this.createStepText(u,e,!1,t,i):"")+"</div>")}return r.push(this.createStepText(a,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+l+"</div>":"")+r.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,s,l){const o=(e===0?0:Math.round(s/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+l),r=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${r}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=Dn(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Qt,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const gi=Ke({name:"QTooltip",inheritAttrs:!1,props:{...Wa,...Hl,...Jn,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Jn.transitionShow,default:"jump-down"},transitionHide:{...Jn.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ds},self:{type:String,default:"top middle",validator:ds},offset:{type:Array,default:()=>[14,14],validator:Xa},scrollTarget:Li,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Kl],setup(n,{slots:e,emit:t,attrs:i}){let s,l;const a=Xe(),{proxy:{$q:o}}=a,r=$(null),c=$(!1),u=T(()=>hs(n.anchor,o.lang.rtl)),h=T(()=>hs(n.self,o.lang.rtl)),y=T(()=>n.persistent!==!0),{registerTick:m,removeTick:g}=Bl(),{registerTimeout:x}=Gl(),{transitionProps:E,transitionStyle:L}=jl(n),{localScrollTarget:S,changeScrollEvent:v,unconfigureScrollTarget:f}=Za(n,he),{anchorEl:b,canShow:F,anchorEvents:O}=Ya({showing:c,configureAnchorEl:ee}),{show:P,hide:K}=Ul({showing:c,canShow:F,handleShow:U,handleHide:ue,hideOnRouteChange:y,processOnMount:!0});Object.assign(O,{delayShow:Ce,delayHide:se});const{showPortal:j,hidePortal:J,renderPortal:X}=$l(a,r,R,"tooltip");if(o.platform.is.mobile===!0){const M={anchorEl:b,innerRef:r,onClickOutside(Y){return K(Y),Y.target.classList.contains("q-dialog__backdrop")&&Ye(Y),!0}},Z=T(()=>n.modelValue===null&&n.persistent!==!0&&c.value===!0);me(Z,Y=>{(Y===!0?Qa:fs)(M)}),St(()=>{fs(M)})}function U(M){j(),m(()=>{l=new MutationObserver(()=>ie()),l.observe(r.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ie(),he()}),s===void 0&&(s=me(()=>o.screen.width+"|"+o.screen.height+"|"+n.self+"|"+n.anchor+"|"+o.lang.rtl,ie)),x(()=>{j(!0),t("show",M)},n.transitionDuration)}function ue(M){g(),J(),ne(),x(()=>{J(!0),t("hide",M)},n.transitionDuration)}function ne(){l!==void 0&&(l.disconnect(),l=void 0),s!==void 0&&(s(),s=void 0),f(),Qi(O,"tooltipTemp")}function ie(){Ja({targetEl:r.value,offset:n.offset,anchorEl:b.value,anchorOrigin:u.value,selfOrigin:h.value,maxHeight:n.maxHeight,maxWidth:n.maxWidth})}function Ce(M){if(o.platform.is.mobile===!0){ms(),document.body.classList.add("non-selectable");const Z=b.value,Y=["touchmove","touchcancel","touchend","click"].map(G=>[Z,G,"delayHide","passiveCapture"]);Ji(O,"tooltipTemp",Y)}x(()=>{P(M)},n.delay)}function se(M){o.platform.is.mobile===!0&&(Qi(O,"tooltipTemp"),ms(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),x(()=>{K(M)},n.hideDelay)}function ee(){if(n.noParentEvent===!0||b.value===null)return;const M=o.platform.is.mobile===!0?[[b.value,"touchstart","delayShow","passive"]]:[[b.value,"mouseenter","delayShow","passive"],[b.value,"mouseleave","delayHide","passive"]];Ji(O,"anchor",M)}function he(){if(b.value!==null||n.scrollTarget!==void 0){S.value=Ri(b.value,n.scrollTarget);const M=n.noParentEvent===!0?ie:K;v(S.value,M)}}function p(){return c.value===!0?C("div",{...i,ref:r,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,L.value],role:"tooltip"},Et(e.default)):null}function R(){return C(Xl,E.value,p)}return St(ne),Object.assign(a.proxy,{updatePosition:ie}),X}});function mi(n){let e=!1,t,i;function s(){i=arguments,e!==!0&&(e=!0,t=window.requestAnimationFrame(()=>{n.apply(this,i),i=void 0,e=!1}))}return s.cancel=()=>{window.cancelAnimationFrame(t),e=!1},s}const{passive:xn}=vi,lu=Ke({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:n=>n>=0&&n<=1},scrollTarget:Li,onScroll:Function},setup(n,{slots:e,emit:t}){const i=$(0),s=$(null),l=$(null),a=$(null);let o,r,c,u,h,y;me(()=>n.height,()=>{o===!0&&g()}),me(()=>n.scrollTarget,()=>{o===!0&&(S(),L())});let m=v=>{i.value=v,n.onScroll!==void 0&&t("scroll",v)};function g(){let v,f,b;y===window?(v=0,b=f=window.innerHeight):(v=es(y).top,f=ts(y),b=v+f);const F=es(s.value).top,O=F+n.height;if(h!==void 0||O>v&&F<b){const P=(b-F)/(n.height+f);x((c-n.height)*P*n.speed),m(P)}}let x=v=>{r.style.transform=`translate3d(-50%,${Math.round(v)}px,0)`};function E(){c=r.naturalHeight||r.videoHeight||ts(r),o===!0&&g()}function L(){o=!0,y=Ri(s.value,n.scrollTarget),y.addEventListener("scroll",g,xn),window.addEventListener("resize",u,xn),g()}function S(){o===!0&&(o=!1,y.removeEventListener("scroll",g,xn),window.removeEventListener("resize",u,xn),y=void 0,x.cancel(),m.cancel(),u.cancel())}return an(()=>{x=mi(x),m=mi(m),u=mi(E),r=e.media!==void 0?l.value.children[0]:a.value,r.onload=r.onloadstart=r.loadedmetadata=E,E(),r.style.display="initial",window.IntersectionObserver!==void 0?(h=new IntersectionObserver(v=>{(v[0].isIntersecting===!0?L:S)()}),h.observe(s.value)):L()}),St(()=>{S(),h==null||h.disconnect(),r.onload=r.onloadstart=r.loadedmetadata=null}),()=>C("div",{ref:s,class:"q-parallax",style:{height:`${n.height}px`}},[C("div",{ref:l,class:"q-parallax__media absolute-full"},e.media!==void 0?e.media():[C("img",{ref:a,src:n.src})]),C("div",{class:"q-parallax__content absolute-full column flex-center"},e.content!==void 0?e.content({percentScrolled:i.value}):Et(e.default))])}}),au=Ci("dialog",{state:()=>({list:[{title:"gisGZHU网站",content:"新生入学指引，根据地图组件查找相关的信息",icon:"喜多",img:"https://s2.loli.net/2025/04/02/Wc3qF7w2OVNiKlG.jpg"},{title:"校园铁路",content:"你或许是一位爱探索的大一新生，你上的校区具有多年的历史。你前往了学校旁的铁路，向南在铁路旁触摸着‘Love And Peace’，向北经过了人烟阜盛的生活区。",icon:"广州",img:"https://s2.loli.net/2025/01/19/CeDMHNGsSZYOmK4.jpg"},{title:"9号楼艺术之迹",content:"在退休工活动中心：5楼发现美术学院的辉煌历史；6楼与破碎雕塑的神秘对视；7楼废弃礼堂的孤独座椅；8楼舞蹈室镜中映出窗外天空与虚幻舞影。",icon:"广州",img:"https://s2.loli.net/2025/01/19/CeDMHNGsSZYOmK4.jpg"},{title:"禁忌的二楼",content:"受研学长邀请，偶遇电梯无法到达的二楼。黑暗无声的空间里，残留着旧时代家具的痕迹与现代渗水的洼地，见证着时空交错的神秘。",icon:"广州",img:"https://s2.loli.net/2025/01/19/CeDMHNGsSZYOmK4.jpg"},{title:"校园传说",content:"后山操场暗藏剧院秘闻与废弃设施；教学楼停车场流传着离奇事件；高楼层架空层飘荡着未解传说；2号楼顶层教室每夜亮起无人知晓的灯光。",icon:"广州",img:"https://s2.loli.net/2025/01/19/CeDMHNGsSZYOmK4.jpg"},{title:"2号楼谜光",content:"基本无人使用的2号楼，最高层的教室总在傍晚亮起刺眼的灯光，如同黑暗中的灯塔，却从未有人见过进出者的身影。",icon:"广州",img:"https://s2.loli.net/2025/01/19/CeDMHNGsSZYOmK4.jpg"}],iconList:{喜多:"https://s2.loli.net/2025/04/02/Wc3qF7w2OVNiKlG.jpg",风景:"https://s2.loli.net/2025/03/04/tQzyHhxs76Y1EU9.jpg",代码:"https://s2.loli.net/2025/02/02/ELbK6urJqYvgBPj.jpg",广州:"https://s2.loli.net/2025/01/19/CeDMHNGsSZYOmK4.jpg"}}),actions:{addDialog(n){if(this.list.length>0&&this.list[this.list.length-1].content===n.content)return;const e={title:n.title,content:n.content,icon:n.icon,img:this.iconList[n.icon]};this.list.push(e)}}}),ou={class:"main"},ru={class:"xh-containt"},uu={class:"xh-s"},cu={class:"xh-title"},du={class:"xh-content"},hu={class:"footer"},fu={class:"q-pa-md",style:{"max-width":"600px"}},gu={class:"q-pa-md",style:{"max-width":"600px"}},mu={class:"q-gutter-sm"},vu={class:"bottom"},_u={__name:"Dialog",setup(n){const e=$("喜多"),t=$(!1),i=au(),s=Gt(),l=T(()=>s.dialog),a=$(!0),o={right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"9px",opacity:.2},r={right:"2px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px"},c=()=>{t.value=!0},u=Wl({title:"标题",content:"内容",icon:""});me(e,y=>{u.icon=y},{immediate:!0});const h=()=>{i.addDialog(u),u.title="主题",u.content="内容",u.icon="",t.value=!1};return(y,m)=>(xe(),nt(nn,null,[w(Bt,{modelValue:l.value,"onUpdate:modelValue":m[4]||(m[4]=g=>l.value=g),persistent:"",maximized:a.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:k(()=>[w(yt,{class:"text-white",style:{width:"101vw",overflow:"hidden",height:"auto"}},{default:k(()=>[w(sl,{class:"q-bar"},{default:k(()=>[w(sn),w(be,{dense:"",flat:"",icon:"minimize",onClick:m[0]||(m[0]=g=>a.value=!1),disable:!a.value},{default:k(()=>[a.value?(xe(),$e(gi,{key:0,class:"bg-white text-primary"},{default:k(()=>m[13]||(m[13]=[Ie("Minimize")])),_:1})):Ln("",!0)]),_:1},8,["disable"]),w(be,{dense:"",flat:"",icon:"crop_square",onClick:m[1]||(m[1]=g=>a.value=!0),disable:a.value},{default:k(()=>[a.value?Ln("",!0):(xe(),$e(gi,{key:0,class:"bg-white text-primary"},{default:k(()=>m[14]||(m[14]=[Ie("Maximize")])),_:1}))]),_:1},8,["disable"]),Ct((xe(),$e(be,{dense:"",flat:"",icon:"close",onClick:m[2]||(m[2]=g=>it(s).dialogChange())},{default:k(()=>[w(gi,{class:"bg-white text-primary"},{default:k(()=>m[15]||(m[15]=[Ie("Close")])),_:1})]),_:1})),[[Tt]])]),_:1}),V("div",ou,[V("div",null,[w(il,{"thumb-style":r,"bar-style":o,style:{height:"100vh",color:"black","padding-bottom":"50px"}},{default:k(()=>[(xe(!0),nt(nn,null,Ii(it(i).list,(g,x)=>(xe(),$e(_o,{key:x,class:"q-pa-xs xh example-item",transition:"scale"},{default:k(()=>[V("div",ru,[w(yt,null,{default:k(()=>[w(lu,{src:g.img,height:50},null,8,["src"])]),_:2},1024),V("div",uu,[V("div",cu,wt(g.title),1),V("div",du,wt(g.content),1)])])]),_:2},1024))),128)),V("div",hu,[w(be,{round:"",color:"primary",icon:"navigation",onClick:m[3]||(m[3]=g=>c())})])]),_:1})])])]),_:1})]),_:1},8,["modelValue","maximized"]),w(Bt,{modelValue:t.value,"onUpdate:modelValue":m[12]||(m[12]=g=>t.value=g)},{default:k(()=>[w(yt,{class:"text-balck"},{default:k(()=>[w(et,{class:"row items-center q-pb-none"},{default:k(()=>[m[16]||(m[16]=V("div",{class:"text-h6"},"发布评论",-1)),w(sn),Ct(w(be,{icon:"close",flat:"",round:"",dense:""},null,512),[[Tt]])]),_:1}),w(et,null,{default:k(()=>[m[17]||(m[17]=V("div",{class:"q-gutter-sm title"},[V("p",null,"标题")],-1)),V("div",fu,[w(ns,{standout:"",modelValue:u.title,"onUpdate:modelValue":m[5]||(m[5]=g=>u.title=g),label:"默认主题"},null,8,["modelValue"])]),m[18]||(m[18]=V("div",{class:"q-gutter-sm body"},[V("p",null,"文本内容")],-1)),V("div",gu,[w(ns,{modelValue:u.content,"onUpdate:modelValue":m[6]||(m[6]=g=>u.content=g),filled:"",autogrow:""},null,8,["modelValue"])]),m[19]||(m[19]=V("div",{class:"q-gutter-sm body"},[V("p",null,"内容背景")],-1)),V("div",null,[V("div",mu,[w(_n,{modelValue:e.value,"onUpdate:modelValue":m[7]||(m[7]=g=>e.value=g),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"喜多",label:"喜多"},null,8,["modelValue"]),w(_n,{modelValue:e.value,"onUpdate:modelValue":m[8]||(m[8]=g=>e.value=g),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"风景",label:"风景"},null,8,["modelValue"]),w(_n,{modelValue:e.value,"onUpdate:modelValue":m[9]||(m[9]=g=>e.value=g),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"广州",label:"广州"},null,8,["modelValue"]),w(_n,{modelValue:e.value,"onUpdate:modelValue":m[10]||(m[10]=g=>e.value=g),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"代码",label:"代码"},null,8,["modelValue"])])]),V("div",vu,[w(be,{color:"secondary",label:"发送",onClick:m[11]||(m[11]=g=>h())})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},yu=ft(_u,[["__scopeId","data-v-e977906a"]]),pu={class:"card-wall-container"},bu={class:"text-caption text-grey-8"},Eu={__name:"Chip",setup(n){const e=Sl(),t=T(()=>e.chip),i=$([{content:"飘走的流年任风吹，广州的天空，在路上",image:"https://s2.loli.net/2025/06/13/SP6wneV4Zh52rKm.jpg",style:{top:"20px",left:"5%",transform:"rotate(-8deg)",zIndex:1}},{content:"铁路的尽头，有很多的涂鸦 南尽头是扇铁门 旁边的涂鸦是“LOVE And Peace” 北尽头则通向公路 南短北长",image:"https://s2.loli.net/2025/06/13/rOHENXJgvja3VUM.png",style:{top:"150px",left:"45%",transform:"rotate(5deg)",zIndex:2}},{content:"日落，图书馆看向足球场，屠龙的少年还在燃烧",image:"https://s2.loli.net/2025/06/13/AQJezCmSVNE48WP.jpg",style:{top:"50px",left:"60%",transform:"rotate(-5deg)",zIndex:1}},{content:"无数个深夜，忙忙碌碌又一天",image:"https://s2.loli.net/2025/06/13/rycwiSaRO8Mx3nV.jpg",style:{top:"300px",left:"10%",transform:"rotate(10deg)",zIndex:3}},{content:"军训",image:"https://s2.loli.net/2025/06/13/xitz8pXHeEGOnJA.jpg",style:{top:"320px",left:"55%",transform:"rotate(-3deg)",zIndex:2}},{content:"耳机里播放着每一首歌，好像回不到的过去",image:"https://s2.loli.net/2025/06/13/x4Wl3dimHg25PRQ.jpg",style:{top:"480px",left:"30%",transform:"rotate(6deg)",zIndex:1}}]);return(s,l)=>(xe(),$e(Bt,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value=a)},{default:k(()=>[w(yt,{class:"card-wall-dialog"},{default:k(()=>[w(et,{class:"row items-center q-py-sm q-px-md bg-white"},{default:k(()=>[l[1]||(l[1]=V("div",{class:"text-h6 text-weight-bold"},"校园记忆墙",-1)),w(be,{icon:"help",flat:"",round:"",dense:""}),w(sn),Ct(w(be,{icon:"close",flat:"",round:"",dense:"",onClick:it(e).changeChip},null,8,["onClick"]),[[Tt]])]),_:1}),w(pt),w(et,{class:"scroll content-area"},{default:k(()=>[V("div",pu,[(xe(!0),nt(nn,null,Ii(i.value,(a,o)=>(xe(),$e(yt,{key:o,class:"scatter-card",flat:"",bordered:"",style:Zl(a.style)},{default:k(()=>[w(qi,{src:a.image,ratio:4/3},null,8,["src"]),w(et,null,{default:k(()=>[V("div",bu,wt(a.content),1)]),_:2},1024)]),_:2},1032,["style"]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Su=ft(Eu,[["__scopeId","data-v-4a7c9d08"]]),xu=Ke({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(n,{slots:e,emit:t}){const i=Xe(),{proxy:{$q:s}}=i,l=a=>{t("click",a)};return()=>{if(n.props===void 0)return C("th",{class:n.autoWidth===!0?"q-table--col-auto-width":"",onClick:l},Et(e.default));let a,o;const r=i.vnode.key;if(r){if(a=n.props.colsMap[r],a===void 0)return}else a=n.props.col;if(a.sortable===!0){const u=a.align==="right"?"unshift":"push";o=Yl(e.default,[]),o[u](C(xt,{class:a.__iconClass,name:s.iconSet.table.arrowUp}))}else o=Et(e.default);const c={class:a.__thClass+(n.autoWidth===!0?" q-table--col-auto-width":""),style:a.headerStyle,onClick:u=>{a.sortable===!0&&n.props.sort(a),l(u)}};return C("th",c,o)}}}),wu=["horizontal","vertical","cell","none"],Cu=Ke({name:"QMarkupTable",props:{...Vn,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:n=>wu.includes(n)}},setup(n,{slots:e}){const t=Xe(),i=qn(n,t.proxy.$q),s=T(()=>`q-markup-table q-table__container q-table__card q-table--${n.separator}-separator`+(i.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(n.dense===!0?" q-table--dense":"")+(n.flat===!0?" q-table--flat":"")+(n.bordered===!0?" q-table--bordered":"")+(n.square===!0?" q-table--square":"")+(n.wrapCells===!1?" q-table--no-wrap":""));return()=>C("div",{class:s.value},[C("table",{class:"q-table"},Et(e.default))])}});function xl(n,e){return C("div",n,[C("table",{class:"q-table"},e)])}const Tu={list:Cn,table:Cu},Pu=["list","table","__qtable"],Lu=Ke({name:"QVirtualScroll",props:{...wi,type:{type:String,default:"list",validator:n=>Pu.includes(n)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Li},setup(n,{slots:e,attrs:t}){let i;const s=$(null),l=T(()=>n.itemsSize>=0&&n.itemsFn!==void 0?parseInt(n.itemsSize,10):Array.isArray(n.items)?n.items.length:0),{virtualScrollSliceRange:a,localResetVirtualScroll:o,padVirtualScroll:r,onVirtualScrollEvt:c}=bl({virtualScrollLength:l,getVirtualScrollTarget:g,getVirtualScrollEl:m}),u=T(()=>{if(l.value===0)return[];const S=(v,f)=>({index:a.value.from+f,item:v});return n.itemsFn===void 0?n.items.slice(a.value.from,a.value.to).map(S):n.itemsFn(a.value.from,a.value.to-a.value.from).map(S)}),h=T(()=>"q-virtual-scroll q-virtual-scroll"+(n.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(n.scrollTarget!==void 0?"":" scroll")),y=T(()=>n.scrollTarget!==void 0?{}:{tabindex:0});me(l,()=>{o()}),me(()=>n.scrollTarget,()=>{E(),x()});function m(){return s.value.$el||s.value}function g(){return i}function x(){i=Ri(m(),n.scrollTarget),i.addEventListener("scroll",c,vi.passive)}function E(){i!==void 0&&(i.removeEventListener("scroll",c,vi.passive),i=void 0)}function L(){let S=r(n.type==="list"?"div":"tbody",u.value.map(e.default));return e.before!==void 0&&(S=e.before().concat(S)),Nn(e.after,S)}return Pi(()=>{o()}),an(()=>{x()}),Os(()=>{x()}),Ds(()=>{E()}),St(()=>{E()}),()=>{if(e.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return n.type==="__qtable"?xl({ref:s,class:"q-table__middle "+h.value},L()):C(Tu[n.type],{...t,ref:s,class:[t.class,h.value],...y.value},L)}}}),Ru={xs:2,sm:4,md:6,lg:10,xl:14};function Ls(n,e,t){return{transform:e===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-n},1,1)`:`scale3d(${n},1,1)`}}const Iu=Ke({name:"QLinearProgress",props:{...Vn,...Vs,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(n,{slots:e}){const{proxy:t}=Xe(),i=qn(n,t.$q),s=qs(n,Ru),l=T(()=>n.indeterminate===!0||n.query===!0),a=T(()=>n.reverse!==n.query),o=T(()=>({...s.value!==null?s.value:{},"--q-linear-progress-speed":`${n.animationSpeed}ms`})),r=T(()=>"q-linear-progress"+(n.color!==void 0?` text-${n.color}`:"")+(n.reverse===!0||n.query===!0?" q-linear-progress--reverse":"")+(n.rounded===!0?" rounded-borders":"")),c=T(()=>Ls(n.buffer!==void 0?n.buffer:1,a.value,t.$q)),u=T(()=>`with${n.instantFeedback===!0?"out":""}-transition`),h=T(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${u.value} q-linear-progress__track--${i.value===!0?"dark":"light"}`+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),y=T(()=>Ls(l.value===!0?1:n.value,a.value,t.$q)),m=T(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${u.value} q-linear-progress__model--${l.value===!0?"in":""}determinate`),g=T(()=>({width:`${n.value*100}%`})),x=T(()=>`q-linear-progress__stripe absolute-${n.reverse===!0?"right":"left"} q-linear-progress__stripe--${u.value}`);return()=>{const E=[C("div",{class:h.value,style:c.value}),C("div",{class:m.value,style:y.value})];return n.stripe===!0&&l.value===!1&&E.push(C("div",{class:x.value,style:g.value})),C("div",{class:r.value,style:o.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":n.indeterminate===!0?void 0:n.value},Nn(e.default,E))}}});let Jt=0;const Au={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ku=["update:fullscreen","fullscreen"];function Fu(){const n=Xe(),{props:e,emit:t,proxy:i}=n;let s,l,a;const o=$(!1);Ql(n)===!0&&me(()=>i.$route.fullPath,()=>{e.noRouteFullscreenExit!==!0&&u()}),me(()=>e.fullscreen,h=>{o.value!==h&&r()}),me(o,h=>{t("update:fullscreen",h),t("fullscreen",h)});function r(){o.value===!0?u():c()}function c(){o.value!==!0&&(o.value=!0,a=i.$el.parentNode,a.replaceChild(l,i.$el),document.body.appendChild(i.$el),Jt++,Jt===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:u},is.add(s))}function u(){o.value===!0&&(s!==void 0&&(is.remove(s),s=void 0),a.replaceChild(i.$el,l),o.value=!1,Jt=Math.max(0,Jt-1),Jt===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),i.$el.scrollIntoView!==void 0&&setTimeout(()=>{i.$el.scrollIntoView()})))}return Pi(()=>{l=document.createElement("span")}),an(()=>{e.fullscreen===!0&&c()}),St(u),Object.assign(i,{toggleFullscreen:r,setFullscreen:c,exitFullscreen:u}),{inFullscreen:o,toggleFullscreen:r}}function Du(n,e){return new Date(n)-new Date(e)}const Ou={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:n=>n==="ad"||n==="da",default:"ad"}};function Mu(n,e,t,i){const s=T(()=>{const{sortBy:o}=e.value;return o&&t.value.find(r=>r.name===o)||null}),l=T(()=>n.sortMethod!==void 0?n.sortMethod:(o,r,c)=>{const u=t.value.find(m=>m.name===r);if(u===void 0||u.field===void 0)return o;const h=c===!0?-1:1,y=typeof u.field=="function"?m=>u.field(m):m=>m[u.field];return o.sort((m,g)=>{let x=y(m),E=y(g);return u.rawSort!==void 0?u.rawSort(x,E,m,g)*h:x==null?-1*h:E==null?1*h:u.sort!==void 0?u.sort(x,E,m,g)*h:_i(x)===!0&&_i(E)===!0?(x-E)*h:ss(x)===!0&&ss(E)===!0?Du(x,E)*h:typeof x=="boolean"&&typeof E=="boolean"?(x-E)*h:([x,E]=[x,E].map(L=>(L+"").toLocaleString().toLowerCase()),x<E?-1*h:x===E?0:h)})});function a(o){let r=n.columnSortOrder;if(Jl(o)===!0)o.sortOrder&&(r=o.sortOrder),o=o.name;else{const h=t.value.find(y=>y.name===o);h!=null&&h.sortOrder&&(r=h.sortOrder)}let{sortBy:c,descending:u}=e.value;c!==o?(c=o,u=r==="da"):n.binaryStateSort===!0?u=!u:u===!0?r==="ad"?c=null:u=!1:r==="ad"?u=!0:c=null,i({sortBy:c,descending:u,page:1})}return{columnToSort:s,computedSortMethod:l,sort:a}}const zu={filter:[String,Object],filterMethod:Function};function Vu(n,e){const t=T(()=>n.filterMethod!==void 0?n.filterMethod:(i,s,l,a)=>{const o=s?s.toLowerCase():"";return i.filter(r=>l.some(c=>{const u=a(c,r)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(o)!==-1}))});return me(()=>n.filter,()=>{Ze(()=>{e({page:1},!0)})},{deep:!0}),{computedFilterMethod:t}}function qu(n,e){for(const t in e)if(e[t]!==n[t])return!1;return!0}function Rs(n){return n.page<1&&(n.page=1),n.rowsPerPage!==void 0&&n.rowsPerPage<1&&(n.rowsPerPage=0),n}const Nu={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Ku(n,e){const{props:t,emit:i}=n,s=$(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:t.rowsPerPageOptions.length!==0?t.rowsPerPageOptions[0]:5},t.pagination)),l=T(()=>{const u=t["onUpdate:pagination"]!==void 0?{...s.value,...t.pagination}:s.value;return Rs(u)}),a=T(()=>l.value.rowsNumber!==void 0);function o(u){r({pagination:u,filter:t.filter})}function r(u={}){Ze(()=>{i("request",{pagination:u.pagination||l.value,filter:u.filter||t.filter,getCellValue:e})})}function c(u,h){const y=Rs({...l.value,...u});if(qu(l.value,y)===!0){a.value===!0&&h===!0&&o(y);return}if(a.value===!0){o(y);return}t.pagination!==void 0&&t["onUpdate:pagination"]!==void 0?i("update:pagination",y):s.value=y}return{innerPagination:s,computedPagination:l,isServerSide:a,requestServerInteraction:r,setPagination:c}}function Hu(n,e,t,i,s,l){const{props:a,emit:o,proxy:{$q:r}}=n,c=T(()=>i.value===!0?t.value.rowsNumber||0:l.value),u=T(()=>{const{page:f,rowsPerPage:b}=t.value;return(f-1)*b}),h=T(()=>{const{page:f,rowsPerPage:b}=t.value;return f*b}),y=T(()=>t.value.page===1),m=T(()=>t.value.rowsPerPage===0?1:Math.max(1,Math.ceil(c.value/t.value.rowsPerPage))),g=T(()=>h.value===0?!0:t.value.page>=m.value),x=T(()=>(a.rowsPerPageOptions.includes(e.value.rowsPerPage)?a.rowsPerPageOptions:[e.value.rowsPerPage].concat(a.rowsPerPageOptions)).map(b=>({label:b===0?r.lang.table.allRows:""+b,value:b})));me(m,(f,b)=>{if(f===b)return;const F=t.value.page;f&&!F?s({page:1}):f<F&&s({page:f})});function E(){s({page:1})}function L(){const{page:f}=t.value;f>1&&s({page:f-1})}function S(){const{page:f,rowsPerPage:b}=t.value;h.value>0&&f*b<c.value&&s({page:f+1})}function v(){s({page:m.value})}return a["onUpdate:pagination"]!==void 0&&o("update:pagination",{...t.value}),{firstRowIndex:u,lastRowIndex:h,isFirstPage:y,isLastPage:g,pagesNumber:m,computedRowsPerPageOptions:x,computedRowsNumber:c,firstPage:E,prevPage:L,nextPage:S,lastPage:v}}const Bu={selection:{type:String,default:"none",validator:n=>["single","multiple","none"].includes(n)},selected:{type:Array,default:()=>[]}},Gu=["update:selected","selection"];function ju(n,e,t,i){const s=T(()=>{const g={};return n.selected.map(i.value).forEach(x=>{g[x]=!0}),g}),l=T(()=>n.selection!=="none"),a=T(()=>n.selection==="single"),o=T(()=>n.selection==="multiple"),r=T(()=>t.value.length!==0&&t.value.every(g=>s.value[i.value(g)]===!0)),c=T(()=>r.value!==!0&&t.value.some(g=>s.value[i.value(g)]===!0)),u=T(()=>n.selected.length);function h(g){return s.value[g]===!0}function y(){e("update:selected",[])}function m(g,x,E,L){e("selection",{rows:x,added:E,keys:g,evt:L});const S=a.value===!0?E===!0?x:[]:E===!0?n.selected.concat(x):n.selected.filter(v=>g.includes(i.value(v))===!1);e("update:selected",S)}return{hasSelectionMode:l,singleSelection:a,multipleSelection:o,allRowsSelected:r,someRowsSelected:c,rowsSelectedNumber:u,isRowSelected:h,clearSelection:y,updateSelection:m}}function Is(n){return Array.isArray(n)?n.slice():[]}const Uu={expanded:Array},$u=["update:expanded"];function Xu(n,e){const t=$(Is(n.expanded));me(()=>n.expanded,a=>{t.value=Is(a)});function i(a){return t.value.includes(a)}function s(a){n.expanded!==void 0?e("update:expanded",a):t.value=a}function l(a,o){const r=t.value.slice(),c=r.indexOf(a);o===!0?c===-1&&(r.push(a),s(r)):c!==-1&&(r.splice(c,1),s(r))}return{isRowExpanded:i,setExpanded:s,updateExpanded:l}}const Wu={visibleColumns:Array};function Zu(n,e,t){const i=T(()=>{if(n.columns!==void 0)return n.columns;const o=n.rows[0];return o!==void 0?Object.keys(o).map(r=>({name:r,label:r.toUpperCase(),field:r,align:_i(o[r])?"right":"left",sortable:!0})):[]}),s=T(()=>{const{sortBy:o,descending:r}=e.value;return(n.visibleColumns!==void 0?i.value.filter(u=>u.required===!0||n.visibleColumns.includes(u.name)===!0):i.value).map(u=>{const h=u.align||"right",y=`text-${h}`;return{...u,align:h,__iconClass:`q-table__sort-icon q-table__sort-icon--${h}`,__thClass:y+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===o?` sorted ${r===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>y+" "+u.classes:m=>y+" "+u.classes(m):()=>y}})}),l=T(()=>{const o={};return s.value.forEach(r=>{o[r.name]=r}),o}),a=T(()=>n.tableColspan!==void 0?n.tableColspan:s.value.length+(t.value===!0?1:0));return{colList:i,computedCols:s,computedColsMap:l,computedColspan:a}}const wn="q-table__bottom row items-center",wl={};pl.forEach(n=>{wl[n]={}});const Yu=Ke({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:n=>["horizontal","vertical","cell","none"].includes(n)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...wl,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Vn,...Au,...Wu,...zu,...Nu,...Uu,...Bu,...Ou},emits:["request","virtualScroll",...ku,...$u,...Gu],setup(n,{slots:e,emit:t}){const i=Xe(),{proxy:{$q:s}}=i,l=qn(n,s),{inFullscreen:a,toggleFullscreen:o}=Fu(),r=T(()=>typeof n.rowKey=="function"?n.rowKey:_=>_[n.rowKey]),c=$(null),u=$(null),h=T(()=>n.grid!==!0&&n.virtualScroll===!0),y=T(()=>" q-table__card"+(l.value===!0?" q-table__card--dark q-dark":"")+(n.square===!0?" q-table--square":"")+(n.flat===!0?" q-table--flat":"")+(n.bordered===!0?" q-table--bordered":"")),m=T(()=>`q-table__container q-table--${n.separator}-separator column no-wrap`+(n.grid===!0?" q-table--grid":y.value)+(l.value===!0?" q-table--dark":"")+(n.dense===!0?" q-table--dense":"")+(n.wrapCells===!1?" q-table--no-wrap":"")+(a.value===!0?" fullscreen scroll":"")),g=T(()=>m.value+(n.loading===!0?" q-table--loading":""));me(()=>n.tableStyle+n.tableClass+n.tableHeaderStyle+n.tableHeaderClass+m.value,()=>{var _;h.value===!0&&((_=u.value)==null||_.reset())});const{innerPagination:x,computedPagination:E,isServerSide:L,requestServerInteraction:S,setPagination:v}=Ku(i,Oe),{computedFilterMethod:f}=Vu(n,v),{isRowExpanded:b,setExpanded:F,updateExpanded:O}=Xu(n,t),P=T(()=>{let _=n.rows;if(L.value===!0||_.length===0)return _;const{sortBy:A,descending:H}=E.value;return n.filter&&(_=f.value(_,n.filter,p.value,Oe)),Z.value!==null&&(_=Y.value(n.rows===_?_.slice():_,A,H)),_}),K=T(()=>P.value.length),j=T(()=>{let _=P.value;if(L.value===!0)return _;const{rowsPerPage:A}=E.value;return A!==0&&(z.value===0&&n.rows!==_?_.length>te.value&&(_=_.slice(0,te.value)):_=_.slice(z.value,te.value)),_}),{hasSelectionMode:J,singleSelection:X,multipleSelection:U,allRowsSelected:ue,someRowsSelected:ne,rowsSelectedNumber:ie,isRowSelected:Ce,clearSelection:se,updateSelection:ee}=ju(n,t,j,r),{colList:he,computedCols:p,computedColsMap:R,computedColspan:M}=Zu(n,E,J),{columnToSort:Z,computedSortMethod:Y,sort:G}=Mu(n,E,he,v),{firstRowIndex:z,lastRowIndex:te,isFirstPage:B,isLastPage:ae,pagesNumber:Le,computedRowsPerPageOptions:st,computedRowsNumber:we,firstPage:We,prevPage:Ee,nextPage:Se,lastPage:De}=Hu(i,x,E,L,v,K),Ne=T(()=>j.value.length===0),lt=T(()=>{const _={};return pl.forEach(A=>{_[A]=n[A]}),_.virtualScrollItemSize===void 0&&(_.virtualScrollItemSize=n.dense===!0?28:48),_});function He(){h.value===!0&&u.value.reset()}function Te(){if(n.grid===!0)return Wn();const _=n.hideHeader!==!0?Ut:null;if(h.value===!0){const H=e["top-row"],N=e["bottom-row"],W={default:fe=>dn(fe.item,e.body,fe.index)};if(H!==void 0){const fe=C("tbody",H({cols:p.value}));W.before=_===null?()=>fe:()=>[_()].concat(fe)}else _!==null&&(W.before=_);return N!==void 0&&(W.after=()=>C("tbody",N({cols:p.value}))),C(Lu,{ref:u,class:n.tableClass,style:n.tableStyle,...lt.value,scrollTarget:n.virtualScrollTarget,items:j.value,type:"__qtable",tableColspan:M.value,onVirtualScroll:_e},W)}const A=[hn()];return _!==null&&A.unshift(_()),xl({class:["q-table__middle scroll",n.tableClass],style:n.tableStyle},A)}function Pe(_,A){if(u.value!==null){u.value.scrollTo(_,A);return}_=parseInt(_,10);const H=c.value.querySelector(`tbody tr:nth-of-type(${_+1})`);if(H!==null){const N=c.value.querySelector(".q-table__middle.scroll"),W=H.offsetTop-n.virtualScrollStickySizeStart,fe=W<N.scrollTop?"decrease":"increase";N.scrollTop=W,t("virtualScroll",{index:_,from:0,to:x.value.rowsPerPage-1,direction:fe})}}function _e(_){t("virtualScroll",_)}function gt(){return[C(Iu,{class:"q-table__linear-progress",color:n.color,dark:l.value,indeterminate:!0,trackColor:"transparent"})]}function dn(_,A,H){const N=r.value(_),W=Ce(N);if(A!==void 0){const de={key:N,row:_,pageIndex:H,__trClass:W?"selected":""};if(n.tableRowStyleFn!==void 0&&(de.__trStyle=n.tableRowStyleFn(_)),n.tableRowClassFn!==void 0){const Qe=n.tableRowClassFn(_);Qe&&(de.__trClass=`${Qe} ${de.__trClass}`)}return A(Pt(de))}const fe=e["body-cell"],ce=p.value.map(de=>{const Qe=e[`body-cell-${de.name}`],It=Qe!==void 0?Qe:fe;return It!==void 0?It(jn({key:N,row:_,pageIndex:H,col:de})):C("td",{class:de.__tdClass(_),style:de.__tdStyle(_)},Oe(de,_))});if(J.value===!0){const de=e["body-selection"],Qe=de!==void 0?de(fn({key:N,row:_,pageIndex:H})):[C(ei,{modelValue:W,color:n.color,dark:l.value,dense:n.dense,"onUpdate:modelValue":(It,Zn)=>{ee([N],[_],It,Zn)}})];ce.unshift(C("td",{class:"q-table--col-auto-width"},Qe))}const Me={key:N,class:{selected:W}};if(n.onRowClick!==void 0&&(Me.class["cursor-pointer"]=!0,Me.onClick=de=>{t("rowClick",de,_,H)}),n.onRowDblclick!==void 0&&(Me.class["cursor-pointer"]=!0,Me.onDblclick=de=>{t("rowDblclick",de,_,H)}),n.onRowContextmenu!==void 0&&(Me.class["cursor-pointer"]=!0,Me.onContextmenu=de=>{t("rowContextmenu",de,_,H)}),n.tableRowStyleFn!==void 0&&(Me.style=n.tableRowStyleFn(_)),n.tableRowClassFn!==void 0){const de=n.tableRowClassFn(_);de&&(Me.class[de]=!0)}return C("tr",Me,ce)}function hn(){const _=e.body,A=e["top-row"],H=e["bottom-row"];let N=j.value.map((W,fe)=>dn(W,_,fe));return A!==void 0&&(N=A({cols:p.value}).concat(N)),H!==void 0&&(N=N.concat(H({cols:p.value}))),C("tbody",N)}function Pt(_){return Be(_),_.cols=_.cols.map(A=>Wt({...A},"value",()=>Oe(A,_.row))),_}function jn(_){return Be(_),Wt(_,"value",()=>Oe(_.col,_.row)),_}function fn(_){return Be(_),_}function Be(_){Object.assign(_,{cols:p.value,colsMap:R.value,sort:G,rowIndex:z.value+_.pageIndex,color:n.color,dark:l.value,dense:n.dense}),J.value===!0&&Wt(_,"selected",()=>Ce(_.key),(A,H)=>{ee([_.key],[_.row],A,H)}),Wt(_,"expand",()=>b(_.key),A=>{O(_.key,A)})}function Oe(_,A){const H=typeof _.field=="function"?_.field(A):A[_.field];return _.format!==void 0?_.format(H,A):H}const Ge=T(()=>({pagination:E.value,pagesNumber:Le.value,isFirstPage:B.value,isLastPage:ae.value,firstPage:We,prevPage:Ee,nextPage:Se,lastPage:De,inFullscreen:a.value,toggleFullscreen:o}));function Un(){const _=e.top,A=e["top-left"],H=e["top-right"],N=e["top-selection"],W=J.value===!0&&N!==void 0&&ie.value>0,fe="q-table__top relative-position row items-center";if(_!==void 0)return C("div",{class:fe},[_(Ge.value)]);let ce;if(W===!0?ce=N(Ge.value).slice():(ce=[],A!==void 0?ce.push(C("div",{class:"q-table__control"},[A(Ge.value)])):n.title&&ce.push(C("div",{class:"q-table__control"},[C("div",{class:["q-table__title",n.titleClass]},n.title)]))),H!==void 0&&(ce.push(C("div",{class:"q-table__separator col"})),ce.push(C("div",{class:"q-table__control"},[H(Ge.value)]))),ce.length!==0)return C("div",{class:fe},ce)}const Lt=T(()=>ne.value===!0?null:ue.value);function Ut(){const _=gn();return n.loading===!0&&e.loading===void 0&&_.push(C("tr",{class:"q-table__progress"},[C("th",{class:"relative-position",colspan:M.value},gt())])),C("thead",_)}function gn(){const _=e.header,A=e["header-cell"];if(_!==void 0)return _(Rt({header:!0})).slice();const H=p.value.map(N=>{const W=e[`header-cell-${N.name}`],fe=W!==void 0?W:A,ce=Rt({col:N});return fe!==void 0?fe(ce):C(xu,{key:N.name,props:ce},()=>N.label)});if(X.value===!0&&n.grid!==!0)H.unshift(C("th",{class:"q-table--col-auto-width"}," "));else if(U.value===!0){const N=e["header-selection"],W=N!==void 0?N(Rt({})):[C(ei,{color:n.color,modelValue:Lt.value,dark:l.value,dense:n.dense,"onUpdate:modelValue":$t})];H.unshift(C("th",{class:"q-table--col-auto-width"},W))}return[C("tr",{class:n.tableHeaderClass,style:n.tableHeaderStyle},H)]}function Rt(_){return Object.assign(_,{cols:p.value,sort:G,colsMap:R.value,color:n.color,dark:l.value,dense:n.dense}),U.value===!0&&Wt(_,"selected",()=>Lt.value,$t),_}function $t(_){ne.value===!0&&(_=!1),ee(j.value.map(r.value),j.value,_)}const mt=T(()=>{const _=[n.iconFirstPage||s.iconSet.table.firstPage,n.iconPrevPage||s.iconSet.table.prevPage,n.iconNextPage||s.iconSet.table.nextPage,n.iconLastPage||s.iconSet.table.lastPage];return s.lang.rtl===!0?_.reverse():_});function mn(){if(n.hideBottom===!0)return;if(Ne.value===!0){if(n.hideNoData===!0)return;const H=n.loading===!0?n.loadingLabel||s.lang.table.loading:n.filter?n.noResultsLabel||s.lang.table.noResults:n.noDataLabel||s.lang.table.noData,N=e["no-data"],W=N!==void 0?[N({message:H,icon:s.iconSet.table.warning,filter:n.filter})]:[C(xt,{class:"q-table__bottom-nodata-icon",name:s.iconSet.table.warning}),H];return C("div",{class:wn+" q-table__bottom--nodata"},W)}const _=e.bottom;if(_!==void 0)return C("div",{class:wn},[_(Ge.value)]);const A=n.hideSelectedBanner!==!0&&J.value===!0&&ie.value>0?[C("div",{class:"q-table__control"},[C("div",[(n.selectedRowsLabel||s.lang.table.selectedRecords)(ie.value)])])]:[];if(n.hidePagination!==!0)return C("div",{class:wn+" justify-end"},Xn(A));if(A.length!==0)return C("div",{class:wn},A)}function $n(_){v({page:1,rowsPerPage:_.value})}function Xn(_){let A;const{rowsPerPage:H}=E.value,N=n.paginationLabel||s.lang.table.pagination,W=e.pagination,fe=n.rowsPerPageOptions.length>1;if(_.push(C("div",{class:"q-table__separator col"})),fe===!0&&_.push(C("div",{class:"q-table__control"},[C("span",{class:"q-table__bottom-item"},[n.rowsPerPageLabel||s.lang.table.recordsPerPage]),C(El,{class:"q-table__select inline q-table__bottom-item",color:n.color,modelValue:H,options:st.value,displayValue:H===0?s.lang.table.allRows:H,dark:l.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":$n})])),W!==void 0)A=W(Ge.value);else if(A=[C("span",H!==0?{class:"q-table__bottom-item"}:{},[H?N(z.value+1,Math.min(te.value,we.value),we.value):N(1,K.value,we.value)])],H!==0&&Le.value>1){const ce={color:n.color,round:!0,dense:!0,flat:!0};n.dense===!0&&(ce.size="sm"),Le.value>2&&A.push(C(be,{key:"pgFirst",...ce,icon:mt.value[0],disable:B.value,ariaLabel:s.lang.pagination.first,onClick:We})),A.push(C(be,{key:"pgPrev",...ce,icon:mt.value[1],disable:B.value,ariaLabel:s.lang.pagination.prev,onClick:Ee}),C(be,{key:"pgNext",...ce,icon:mt.value[2],disable:ae.value,ariaLabel:s.lang.pagination.next,onClick:Se})),Le.value>2&&A.push(C(be,{key:"pgLast",...ce,icon:mt.value[3],disable:ae.value,ariaLabel:s.lang.pagination.last,onClick:De}))}return _.push(C("div",{class:"q-table__control"},A)),_}function vn(){const _=n.gridHeader===!0?[C("table",{class:"q-table"},[Ut()])]:n.loading===!0&&e.loading===void 0?gt():void 0;return C("div",{class:"q-table__middle"},_)}function Wn(){const _=e.item!==void 0?e.item:A=>{const H=A.cols.map(W=>C("div",{class:"q-table__grid-item-row"},[C("div",{class:"q-table__grid-item-title"},[W.label]),C("div",{class:"q-table__grid-item-value"},[W.value])]));if(J.value===!0){const W=e["body-selection"],fe=W!==void 0?W(A):[C(ei,{modelValue:A.selected,color:n.color,dark:l.value,dense:n.dense,"onUpdate:modelValue":(ce,Me)=>{ee([A.key],[A.row],ce,Me)}})];H.unshift(C("div",{class:"q-table__grid-item-row"},fe),C(pt,{dark:l.value}))}const N={class:["q-table__grid-item-card"+y.value,n.cardClass],style:n.cardStyle};if(n.cardStyleFn!==void 0&&(N.style=[N.style,n.cardStyleFn(A.row)]),n.cardClassFn!==void 0){const W=n.cardClassFn(A.row);W&&(N.class[0]+=` ${W}`)}return(n.onRowClick!==void 0||n.onRowDblclick!==void 0||n.onRowContextmenu!==void 0)&&(N.class[0]+=" cursor-pointer",n.onRowClick!==void 0&&(N.onClick=W=>{t("RowClick",W,A.row,A.pageIndex)}),n.onRowDblclick!==void 0&&(N.onDblclick=W=>{t("RowDblclick",W,A.row,A.pageIndex)}),n.onRowContextmenu!==void 0&&(N.onContextmenu=W=>{t("rowContextmenu",W,A.row,A.pageIndex)})),C("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(A.selected===!0?" q-table__grid-item--selected":"")},[C("div",N,H)])};return C("div",{class:["q-table__grid-content row",n.cardContainerClass],style:n.cardContainerStyle},j.value.map((A,H)=>_(Pt({key:r.value(A),row:A,pageIndex:H}))))}return Object.assign(i.proxy,{requestServerInteraction:S,setPagination:v,firstPage:We,prevPage:Ee,nextPage:Se,lastPage:De,isRowSelected:Ce,clearSelection:se,isRowExpanded:b,setExpanded:F,sort:G,resetVirtualScroll:He,scrollTo:Pe,getCellValue:Oe}),ea(i.proxy,{filteredSortedRows:()=>P.value,computedRows:()=>j.value,computedRowsNumber:()=>we.value}),()=>{const _=[Un()],A={ref:c,class:g.value};return n.grid===!0?_.push(vn()):Object.assign(A,{class:[A.class,n.cardClass],style:n.cardStyle}),_.push(Te(),mn()),n.loading===!0&&e.loading!==void 0&&_.push(e.loading()),C("div",A,_)}}}),Qu={class:"q-pa-md list-body"},Ju={__name:"list",setup(n){const e=Gt(),t=T(()=>e.listPopup),i=[{name:"item",required:!0,label:"物品名称",align:"left",field:l=>l.name,format:l=>`${l}`,sortable:!0},{name:"category",align:"center",label:"类别",field:"category",sortable:!0,filter:!0},{name:"essential",label:"是否必需",field:"essential",sortable:!0,format:l=>l?"必需":"可选"},{name:"quantity",label:"建议数量",field:"quantity",sortable:!0,sort:(l,a)=>parseInt(l,10)-parseInt(a,10)},{name:"notes",label:"备注说明",field:"notes"}],s=[{name:"身份证",category:"证件类",essential:!0,quantity:"原件+复印件3份",notes:"复印件建议多准备几份"},{name:"录取通知书",category:"证件类",essential:!0,quantity:"1份",notes:"原件及学校要求的复印件"},{name:"证件照",category:"证件类",essential:!0,quantity:"10张",notes:"一寸、二寸蓝白底各准备"},{name:"床上用品",category:"生活用品",essential:!0,quantity:"1套",notes:"床单、被褥、枕头等"},{name:"洗漱用品",category:"生活用品",essential:!0,quantity:"1套",notes:"牙刷、牙膏、毛巾、沐浴露等"},{name:"常用药品",category:"生活用品",essential:!1,quantity:"适量",notes:"感冒药、创可贴、体温计等"},{name:"文具套装",category:"学习用品",essential:!0,quantity:"1套",notes:"笔、笔记本、文件夹等"},{name:"笔记本电脑",category:"电子产品",essential:!1,quantity:"1台",notes:"根据专业需求准备"},{name:"插线板",category:"电子产品",essential:!0,quantity:"1-2个",notes:"宿舍插座通常不够用"},{name:"现金/银行卡",category:"财务类",essential:!0,quantity:"适量",notes:"准备少量现金应急"},{name:"换洗衣物",category:"衣物类",essential:!0,quantity:"3-5套",notes:"根据季节准备"},{name:"运动鞋",category:"衣物类",essential:!0,quantity:"1-2双",notes:"体育课必备"},{name:"水杯/水壶",category:"生活用品",essential:!0,quantity:"1个",notes:"宿舍和上课都需要"},{name:"台灯",category:"电子产品",essential:!1,quantity:"1个",notes:"宿舍熄灯后使用"},{name:"防晒霜",category:"军训用品",essential:!0,quantity:"1瓶",notes:"SPF50+，防止晒伤"},{name:"大水杯",category:"军训用品",essential:!0,quantity:"1个",notes:"容量建议1L以上"},{name:"透气鞋垫",category:"军训用品",essential:!1,quantity:"2-3双",notes:"缓解站军姿的疲劳"},{name:"充电宝",category:"电子产品",essential:!0,quantity:"1个",notes:"容量20000mAh以内"},{name:"耳机",category:"电子产品",essential:!0,quantity:"1副",notes:"建议有线无线各备一副"}];return(l,a)=>(xe(),$e(Bt,{modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value=o),"transition-show":"scale","transition-hide":"scale","no-backdrop-dismiss":""},{default:k(()=>[w(yt,{class:"terms-dialog"},{default:k(()=>[w(et,{class:"row items-center dialog-header"},{default:k(()=>[a[3]||(a[3]=V("div",{class:"text-h6"},"清单",-1)),w(sn),Ct(w(be,{icon:"close",flat:"",round:"",dense:"",onClick:a[0]||(a[0]=o=>it(e).listPop())},null,512),[[Tt]])]),_:1}),w(et,{class:"q-pt-none scroll scroll-area"},{default:k(()=>[V("div",Qu,[w(Yu,{rows:s,columns:i,"row-key":"name",required:"","row-class":o=>o.essential?"text-weight-bold":"","rows-per-page-label":"当前一页含有的项目数","rows-per-page-options":[5,15,25,50,100]},null,8,["row-class"])])]),_:1}),w(pt),w(Ns,{align:"right",class:"dialog-actions"},{default:k(()=>[Ct(w(be,{unelevated:"",label:"收到",color:"primary",onClick:a[1]||(a[1]=o=>it(e).listPop())},null,512),[[Tt]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ec=ft(Ju,[["__scopeId","data-v-6b6dfe3e"]]),tc={key:0,class:"image-modal",tabindex:"0"},nc={key:0,class:"loading-indicator"},ic={class:"modal-content"},sc=["src"],lc={__name:"Showimg",setup(n){const e=Gt(),t=T(()=>e.ShowImgUrl),i=T(()=>e.ShowImg),s=$(!1),l=$(!1);me(t,c=>{c&&(s.value=!0,l.value=!1)});const a=()=>{s.value=!1},o=()=>{s.value=!1,l.value=!0},r=()=>{e.showImgFu()};return(c,u)=>i.value?(xe(),nt("div",tc,[s.value?(xe(),nt("div",nc,u[0]||(u[0]=[V("div",{class:"spinner"},null,-1),V("div",{class:"loading-text"},"图片加载中...",-1)]))):Ln("",!0),V("div",ic,[V("img",{src:t.value,alt:"校园全景图",class:"modal-image",onLoad:a,onError:o},null,40,sc),V("button",{class:"close-button",onClick:r},u[1]||(u[1]=[V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white"},[V("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))])])):Ln("",!0)}},ac=ft(lc,[["__scopeId","data-v-012e3ac2"]]),oc={class:"q-pa-md"},rc={class:"q-pl-md row items-center"},uc={class:"cursor-pointer non-selectable"},cc={class:"q-ml-md cursor-pointer non-selectable"},dc={__name:"main",setup(n){const e=Gt(),t=vl(),i=$(null),s=$(["标准地图","卫星地图"]),l=new xs({url:"http://webst0{1-4}.is.autonavi.com/appmaptile?style=7&x={x}&y={y}&z={z}&lang=zh_cn&scale=1&size=1"}),a=new xs({url:"http://webst0{1-4}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}&lang=zh_cn&scale=1&size=1"});let o="";const r=$(null),c=()=>{const L=new Ss({source:l}),S=new Ss({source:a}),v=new dt({center:eo([113.26591,23.150009]),zoom:17,maxZoom:18});r.value=new Zo({target:i.value,layers:[L],view:v,canvas:{willReadFrequently:!0},controls:[new su({})]});const f=new to,b=new no({source:f});e.initPathLine(r.value),r.value.addLayer(b),r.value.on("click",F=>{const O=F.coordinate,P=new io({geometry:new so(O)});f.addFeature(P),r.value.getView().animate({center:O,duration:1e3,zoom:17})}),r.value.on("pointermove",F=>{const O=r.value.getEventPixel(F.originalEvent),P=r.value.getFeaturesAtPixel(O,{hitTolerance:5,layerFilter:K=>K===b&&K.getVisible()});if(P.length>0){const K=P[0],j=K.getGeometry();if(j.getType()==="Point"){const J=K.getProperties();tooltip.innerHTML=`
        <div class="tooltip-content">${J.text}</div>
      `;const X=j.getCoordinates(),U=r.value.getPixelFromCoordinate(X);tooltip.style.display="block",tooltip.style.left=`${U[0]}px`,tooltip.style.top=`${U[1]-15}px`;return}}tooltip.style.display="none"}),r.value.on("click",F=>{const O=F.coordinate;console.log("新坐标：",lo(O))}),r.value.getView().on("change:resolution",()=>{ao(r.value,v)}),oo([113.26591,23.150009],f,r.value,"广州大学桂花岗校区","又称小桂花,是大部分文科大一学生和部分研究生生活的地方,位于广州市中心区域,比较老旧"),me(()=>t.location,(F,O)=>{console.log("count 变化:",O,"→",F),t.location?ro(f,r.value):uo(f,r.value)},{deep:!0,immediate:!0}),e.Map=r.value,e.Source=f,o=F=>{kr(F,r.value,L,S)}},u=$(!0),h=()=>{Ae.isEnabled&&i.value&&Ae.toggle(i.value)};an(()=>{c()});const y=async()=>{await e.drawPolygon(r.value)},m=async()=>{await e.removePolygon(r.value)};ta(()=>{r.value&&(r.value.setTarget(null),r.value=null),Ae.isEnabled&&Ae.off("change")});const g=()=>{ti.push("/about")},x=()=>{ti.push({path:"/picture",query:{type:"Dormitory"}})},E=()=>{ti.push({path:"/picture",query:{type:"Canteen"}})};return(L,S)=>(xe(),nt("div",oc,[w(ac),w(Su),w(yu),w(ec),w(ho,{view:"lHh lpr lFf",container:"",style:{height:"830px"},class:"shadow-2 rounded-borders"},{default:k(()=>[w(fo,{elevated:"",class:"bar-header"},{default:k(()=>[w(sl,{class:"bar-header"},{default:k(()=>[w(xt,{name:"laptop_chromebook"}),S[6]||(S[6]=V("div",null,"GZHU地图",-1)),w(sn),w(be,{dense:"",flat:"",icon:"minimize"}),w(be,{dense:"",flat:"",icon:"crop_square"}),w(be,{dense:"",flat:"",icon:"close"})]),_:1}),V("div",rc,[V("div",uc,[S[10]||(S[10]=Ie(" 区域 ")),w(Pn,null,{default:k(()=>[w(Cn,{dense:"",style:{"min-width":"100px",color:"#000"}},{default:k(()=>[Ct((xe(),$e(je,{clickable:"",onClick:h},{default:k(()=>[w(ze,null,{default:k(()=>S[7]||(S[7]=[Ie("打开全屏")])),_:1})]),_:1})),[[Tt]]),w(pt),w(je,{clickable:""},{default:k(()=>[w(ze,null,{default:k(()=>S[8]||(S[8]=[Ie("相关")])),_:1}),w(ze,{side:""},{default:k(()=>[w(xt,{name:"keyboard_arrow_right"})]),_:1}),w(Pn,{anchor:"top end",self:"top start",style:{color:"#000"}},{default:k(()=>[w(Cn,null,{default:k(()=>[(xe(!0),nt(nn,null,Ii(s.value,(v,f)=>(xe(),$e(je,{key:v,dense:"",clickable:"",onClick:b=>it(o)(f)},{default:k(()=>[w(ze,null,{default:k(()=>[Ie(wt(v),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),w(pt),Ct((xe(),$e(je,{clickable:"",onClick:S[0]||(S[0]=v=>g())},{default:k(()=>[w(ze,null,{default:k(()=>S[9]||(S[9]=[Ie("退出")])),_:1})]),_:1})),[[Tt]])]),_:1})]),_:1})]),V("div",cc,[S[16]||(S[16]=Ie(" 补充 ")),w(Pn,{"auto-close":""},{default:k(()=>[w(Cn,{dense:"",style:{"min-width":"100px",color:"#000"}},{default:k(()=>[w(je,{clickable:""},{default:k(()=>[w(ze,{onClick:x},{default:k(()=>S[11]||(S[11]=[Ie("宿舍照片")])),_:1})]),_:1}),w(je,{clickable:"",onClick:E},{default:k(()=>[w(ze,null,{default:k(()=>S[12]||(S[12]=[Ie("饭堂照片")])),_:1})]),_:1}),w(je,{clickable:"",to:"/cat"},{default:k(()=>[w(ze,null,{default:k(()=>S[13]||(S[13]=[Ie("猫咪照片")])),_:1})]),_:1}),w(pt),w(je,{clickable:"",onClick:S[1]||(S[1]=v=>y())},{default:k(()=>[w(ze,null,{default:k(()=>S[14]||(S[14]=[Ie("打开区块")])),_:1})]),_:1}),w(je,{clickable:"",onClick:S[2]||(S[2]=v=>m())},{default:k(()=>[w(ze,null,{default:k(()=>S[15]||(S[15]=[Ie("关闭区块")])),_:1})]),_:1})]),_:1})]),_:1})]),V("div",{class:"q-ml-md cursor-pointer non-selectable",onClick:S[3]||(S[3]=v=>it(e).dialogChange())}," 评论区 "),w(be,{flat:"",onClick:S[4]||(S[4]=v=>u.value=!u.value),round:"",dense:"",icon:"menu",id:"menu-btn"})])]),_:1}),w(go,{side:"right",modelValue:u.value,"onUpdate:modelValue":S[5]||(S[5]=v=>u.value=v),"show-if-above":"",bordered:"",width:300,breakpoint:500,class:"bg-grey-3",lazy:"",behavior:"desktop",elevated:""},{default:k(()=>[w(nu)]),_:1},8,["modelValue"]),w(mo,null,{default:k(()=>[w(yo,{class:"q-pa-md"},{default:k(()=>[V("div",{id:"map",ref_key:"mapElement",ref:i},null,512),S[17]||(S[17]=V("div",{id:"tooltip",class:"tooltip"},null,-1))]),_:1})]),_:1})]),_:1})]))}},Sc=ft(dc,[["__scopeId","data-v-71389914"]]);export{Sc as default};
